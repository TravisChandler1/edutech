"use strict";exports.id=804,exports.ids=[804],exports.modules={4804:(e,r,n)=>{n.d(r,{Kg:()=>ts});var o,u,h,l,p,d=Object.create,y=Object.defineProperty,g=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,b=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,io=(e,r,n)=>r in e?y(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,a=(e,r)=>y(e,"name",{value:r,configurable:!0}),K=(e,r)=>()=>(e&&(r=e(e=0)),r),I=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),X=(e,r)=>{for(var n in r)y(e,n,{get:r[n],enumerable:!0})},_n=(e,r,n,o)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let u of m(r))v.call(e,u)||u===n||y(e,u,{get:()=>r[u],enumerable:!(o=g(r,u))||o.enumerable});return e},We=(e,r,n)=>(n=null!=e?d(b(e)):{},_n(!r&&e&&e.__esModule?n:y(n,"default",{value:e,enumerable:!0}),e)),k=e=>_n(y({},"__esModule",{value:!0}),e),T=(e,r,n)=>(io(e,"symbol"!=typeof r?r+"":r,n),n),w=I(e=>{E(),e.byteLength=oo,e.toByteArray=uo,e.fromByteArray=lo;var r,n,o=[],u=[],h="u">typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(r=0,n=l.length;r<n;++r)o[r]=l[r],u[l.charCodeAt(r)]=r;function Cn(e){var r=e.length;if(r%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=r);var o=n===r?0:4-n%4;return[n,o]}function oo(e){var r=Cn(e),n=r[0],o=r[1];return(n+o)*3/4-o}function ao(e,r,n){return(r+n)*3/4-n}function uo(e){var r,n,o=Cn(e),l=o[0],p=o[1],d=new h(ao(e,l,p)),y=0,g=p>0?l-4:l;for(n=0;n<g;n+=4)r=u[e.charCodeAt(n)]<<18|u[e.charCodeAt(n+1)]<<12|u[e.charCodeAt(n+2)]<<6|u[e.charCodeAt(n+3)],d[y++]=r>>16&255,d[y++]=r>>8&255,d[y++]=255&r;return 2===p&&(r=u[e.charCodeAt(n)]<<2|u[e.charCodeAt(n+1)]>>4,d[y++]=255&r),1===p&&(r=u[e.charCodeAt(n)]<<10|u[e.charCodeAt(n+1)]<<4|u[e.charCodeAt(n+2)]>>2,d[y++]=r>>8&255,d[y++]=255&r),d}function co(e){return o[e>>18&63]+o[e>>12&63]+o[e>>6&63]+o[63&e]}function ho(e,r,n){for(var o=[],u=r;u<n;u+=3)o.push(co((e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2])));return o.join("")}function lo(e){for(var r,n=e.length,u=n%3,h=[],l=0,p=n-u;l<p;l+=16383)h.push(ho(e,l,l+16383>p?p:l+16383));return 1===u?h.push(o[(r=e[n-1])>>2]+o[r<<4&63]+"=="):2===u&&h.push(o[(r=(e[n-2]<<8)+e[n-1])>>10]+o[r>>4&63]+o[r<<2&63]+"="),h.join("")}u[45]=62,u[95]=63,a(Cn,"getLens"),a(oo,"byteLength"),a(ao,"_byteLength"),a(uo,"toByteArray"),a(co,"tripletToBase64"),a(ho,"encodeChunk"),a(lo,"fromByteArray")}),S=I(e=>{E(),e.read=function(e,r,n,o,u){var h,l,p=8*u-o-1,d=(1<<p)-1,y=d>>1,g=-7,m=n?u-1:0,b=n?-1:1,v=e[r+m];for(m+=b,h=v&(1<<-g)-1,v>>=-g,g+=p;g>0;h=256*h+e[r+m],m+=b,g-=8);for(l=h&(1<<-g)-1,h>>=-g,g+=o;g>0;l=256*l+e[r+m],m+=b,g-=8);if(0===h)h=1-y;else{if(h===d)return l?NaN:(v?-1:1)*(1/0);l+=Math.pow(2,o),h-=y}return(v?-1:1)*l*Math.pow(2,h-o)},e.write=function(e,r,n,o,u,h){var l,p,d,y=8*h-u-1,g=(1<<y)-1,m=g>>1,b=23===u?5960464477539062e-23:0,v=o?0:h-1,w=o?1:-1,S=r<0||0===r&&1/r<0?1:0;for(isNaN(r=Math.abs(r))||r===1/0?(p=isNaN(r)?1:0,l=g):(l=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-l))<1&&(l--,d*=2),l+m>=1?r+=b/d:r+=b*Math.pow(2,1-m),r*d>=2&&(l++,d/=2),l+m>=g?(p=0,l=g):l+m>=1?(p=(r*d-1)*Math.pow(2,u),l+=m):(p=r*Math.pow(2,m-1)*Math.pow(2,u),l=0));u>=8;e[n+v]=255&p,v+=w,p/=256,u-=8);for(l=l<<u|p,y+=u;y>0;e[n+v]=255&l,v+=w,l/=256,y-=8);e[n+v-w]|=128*S}}),_=I(e=>{E();var r=w(),n=S(),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function fo(){try{let e=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(e,r),42===e.foo()}catch{return!1}}function le(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let r=new Uint8Array(e);return Object.setPrototypeOf(r,f.prototype),r}function f(e,r,n){if("number"==typeof e){if("string"==typeof r)throw TypeError('The "string" argument must be of type string. Received type number');return Ft(e)}return Fn(e,r,n)}function Fn(e,r,n){if("string"==typeof e)return yo(e,r);if(ArrayBuffer.isView(e))return mo(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ae(e,ArrayBuffer)||e&&ae(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(ae(e,SharedArrayBuffer)||e&&ae(e.buffer,SharedArrayBuffer)))return Lt(e,r,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return f.from(o,r,n);let u=go(e);if(u)return u;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),r,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function Mn(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function po(e,r,n){return Mn(e),e<=0?le(e):void 0!==r?"string"==typeof n?le(e).fill(r,n):le(e).fill(r):le(e)}function Ft(e){return Mn(e),le(e<0?0:0|Mt(e))}function yo(e,r){if(("string"!=typeof r||""===r)&&(r="utf8"),!f.isEncoding(r))throw TypeError("Unknown encoding: "+r);let n=0|Dn(e,r),o=le(n),u=o.write(e,r);return u!==n&&(o=o.slice(0,u)),o}function Bt(e){let r=e.length<0?0:0|Mt(e.length),n=le(r);for(let o=0;o<r;o+=1)n[o]=255&e[o];return n}function mo(e){if(ae(e,Uint8Array)){let r=new Uint8Array(e);return Lt(r.buffer,r.byteOffset,r.byteLength)}return Bt(e)}function Lt(e,r,n){let o;if(r<0||e.byteLength<r)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(o=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),f.prototype),o}function go(e){if(f.isBuffer(e)){let r=0|Mt(e.length),n=le(r);return 0===n.length||e.copy(n,0,0,r),n}return void 0!==e.length?"number"!=typeof e.length||Ot(e.length)?le(0):Bt(e):"Buffer"===e.type&&Array.isArray(e.data)?Bt(e.data):void 0}function Mt(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function wo(e){return+e!=e&&(e=0),f.alloc(+e)}function Dn(e,r){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ae(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===n)return 0;let u=!1;for(;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Rt(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Hn(e).length;default:if(u)return o?-1:Rt(e).length;r=(""+r).toLowerCase(),u=!0}}function bo(e,r,n){let o=!1;if((void 0===r||r<0)&&(r=0),r>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Po(this,r,n);case"utf8":case"utf-8":return kn(this,r,n);case"ascii":return Io(this,r,n);case"latin1":case"binary":return To(this,r,n);case"base64":return Ao(this,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bo(this,r,n);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function ve(e,r,n){let o=e[r];e[r]=e[n],e[n]=o}function On(e,r,n,o,u){if(0===e.length)return -1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Ot(n=+n)&&(n=u?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(u)return -1;n=e.length-1}else if(n<0){if(!u)return -1;n=0}if("string"==typeof r&&(r=f.from(r,o)),f.isBuffer(r))return 0===r.length?-1:Bn(e,r,n,o,u);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?u?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):Bn(e,[r],n,o,u);throw TypeError("val must be string, number or Buffer")}function Bn(e,r,n,o,u){let h,l=1,p=e.length,d=r.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||r.length<2)return -1;l=2,p/=2,d/=2,n/=2}function c(e,r){return 1===l?e[r]:e.readUInt16BE(r*l)}if(a(c,"read"),u){let o=-1;for(h=n;h<p;h++)if(c(e,h)===c(r,-1===o?0:h-o)){if(-1===o&&(o=h),h-o+1===d)return o*l}else -1!==o&&(h-=h-o),o=-1}else for(n+d>p&&(n=p-d),h=n;h>=0;h--){let n=!0;for(let o=0;o<d;o++)if(c(e,h+o)!==c(r,o)){n=!1;break}if(n)return h}return -1}function So(e,r,n,o){let u;n=Number(n)||0;let h=e.length-n;o?(o=Number(o))>h&&(o=h):o=h;let l=r.length;for(o>l/2&&(o=l/2),u=0;u<o;++u){let o=parseInt(r.substr(2*u,2),16);if(Ot(o))break;e[n+u]=o}return u}function xo(e,r,n,o){return ot(Rt(r,e.length-n),e,n,o)}function Eo(e,r,n,o){return ot(Mo(r),e,n,o)}function vo(e,r,n,o){return ot(Hn(r),e,n,o)}function _o(e,r,n,o){return ot(Do(r,e.length-n),e,n,o)}function Ao(e,n,o){return 0===n&&o===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(n,o))}function kn(e,r,n){n=Math.min(e.length,n);let o=[],u=r;for(;u<n;){let r=e[u],h=null,l=r>239?4:r>223?3:r>191?2:1;if(u+l<=n){let n,o,p,d;switch(l){case 1:r<128&&(h=r);break;case 2:(192&(n=e[u+1]))==128&&(d=(31&r)<<6|63&n)>127&&(h=d);break;case 3:n=e[u+1],o=e[u+2],(192&n)==128&&(192&o)==128&&(d=(15&r)<<12|(63&n)<<6|63&o)>2047&&(d<55296||d>57343)&&(h=d);break;case 4:n=e[u+1],o=e[u+2],p=e[u+3],(192&n)==128&&(192&o)==128&&(192&p)==128&&(d=(15&r)<<18|(63&n)<<12|(63&o)<<6|63&p)>65535&&d<1114112&&(h=d)}}null===h?(h=65533,l=1):h>65535&&(h-=65536,o.push(h>>>10&1023|55296),h=56320|1023&h),o.push(h),u+=l}return Co(o)}function Co(e){let r=e.length;if(r<=4096)return String.fromCharCode.apply(String,e);let n="",o=0;for(;o<r;)n+=String.fromCharCode.apply(String,e.slice(o,o+=4096));return n}function Io(e,r,n){let o="";n=Math.min(e.length,n);for(let u=r;u<n;++u)o+=String.fromCharCode(127&e[u]);return o}function To(e,r,n){let o="";n=Math.min(e.length,n);for(let u=r;u<n;++u)o+=String.fromCharCode(e[u]);return o}function Po(e,r,n){let o=e.length;(!r||r<0)&&(r=0),(!n||n<0||n>o)&&(n=o);let u="";for(let o=r;o<n;++o)u+=l[e[o]];return u}function Bo(e,r,n){let o=e.slice(r,n),u="";for(let e=0;e<o.length-1;e+=2)u+=String.fromCharCode(o[e]+256*o[e+1]);return u}function U(e,r,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+r>n)throw RangeError("Trying to access beyond buffer length")}function z(e,r,n,o,u,h){if(!f.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(r>u||r<h)throw RangeError('"value" argument is out of bounds');if(n+o>e.length)throw RangeError("Index out of range")}function Un(e,r,n,o,u){jn(r,o,u,e,n,7);let h=Number(r&BigInt(4294967295));e[n++]=h,h>>=8,e[n++]=h,h>>=8,e[n++]=h,h>>=8,e[n++]=h;let l=Number(r>>BigInt(32)&BigInt(4294967295));return e[n++]=l,l>>=8,e[n++]=l,l>>=8,e[n++]=l,l>>=8,e[n++]=l,n}function qn(e,r,n,o,u){jn(r,o,u,e,n,7);let h=Number(r&BigInt(4294967295));e[n+7]=h,h>>=8,e[n+6]=h,h>>=8,e[n+5]=h,h>>=8,e[n+4]=h;let l=Number(r>>BigInt(32)&BigInt(4294967295));return e[n+3]=l,l>>=8,e[n+2]=l,l>>=8,e[n+1]=l,l>>=8,e[n]=l,n+8}function Nn(e,r,n,o,u,h){if(n+o>e.length||n<0)throw RangeError("Index out of range")}function Qn(e,r,o,u,h){return r=+r,o>>>=0,h||Nn(e,r,o,4,34028234663852886e22,-34028234663852886e22),n.write(e,r,o,u,23,4),o+4}function Wn(e,r,o,u,h){return r=+r,o>>>=0,h||Nn(e,r,o,8,17976931348623157e292,-17976931348623157e292),n.write(e,r,o,u,52,8),o+8}e.Buffer=f,e.SlowBuffer=wo,e.INSPECT_MAX_BYTES=50,e.kMaxLength=2147483647,f.TYPED_ARRAY_SUPPORT=fo(),!f.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),a(fo,"typedArraySupport"),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),a(le,"createBuffer"),a(f,"Buffer"),f.poolSize=8192,a(Fn,"from"),f.from=function(e,r,n){return Fn(e,r,n)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),a(Mn,"assertSize"),a(po,"alloc"),f.alloc=function(e,r,n){return po(e,r,n)},a(Ft,"allocUnsafe"),f.allocUnsafe=function(e){return Ft(e)},f.allocUnsafeSlow=function(e){return Ft(e)},a(yo,"fromString"),a(Bt,"fromArrayLike"),a(mo,"fromArrayView"),a(Lt,"fromArrayBuffer"),a(go,"fromObject"),a(Mt,"checked"),a(wo,"SlowBuffer"),f.isBuffer=a(function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},"isBuffer"),f.compare=a(function(e,r){if(ae(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),ae(r,Uint8Array)&&(r=f.from(r,r.offset,r.byteLength)),!f.isBuffer(e)||!f.isBuffer(r))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,o=r.length;for(let u=0,h=Math.min(n,o);u<h;++u)if(e[u]!==r[u]){n=e[u],o=r[u];break}return n<o?-1:o<n?1:0},"compare"),f.isEncoding=a(function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),f.concat=a(function(e,r){let n;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let o=f.allocUnsafe(r),u=0;for(n=0;n<e.length;++n){let r=e[n];if(ae(r,Uint8Array))u+r.length>o.length?(f.isBuffer(r)||(r=f.from(r)),r.copy(o,u)):Uint8Array.prototype.set.call(o,r,u);else if(f.isBuffer(r))r.copy(o,u);else throw TypeError('"list" argument must be an Array of Buffers');u+=r.length}return o},"concat"),a(Dn,"byteLength"),f.byteLength=Dn,a(bo,"slowToString"),f.prototype._isBuffer=!0,a(ve,"swap"),f.prototype.swap16=a(function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)ve(this,r,r+1);return this},"swap16"),f.prototype.swap32=a(function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)ve(this,r,r+3),ve(this,r+1,r+2);return this},"swap32"),f.prototype.swap64=a(function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)ve(this,r,r+7),ve(this,r+1,r+6),ve(this,r+2,r+5),ve(this,r+3,r+4);return this},"swap64"),f.prototype.toString=a(function(){let e=this.length;return 0===e?"":0==arguments.length?kn(this,0,e):bo.apply(this,arguments)},"toString"),f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=a(function(e){if(!f.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},"equals"),f.prototype.inspect=a(function(){let r="",n=e.INSPECT_MAX_BYTES;return r=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(r+=" ... "),"<Buffer "+r+">"},"inspect"),o&&(f.prototype[o]=f.prototype.inspect),f.prototype.compare=a(function(e,r,n,o,u){if(ae(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===u&&(u=this.length),r<0||n>e.length||o<0||u>this.length)throw RangeError("out of range index");if(o>=u&&r>=n)return 0;if(o>=u)return -1;if(r>=n)return 1;if(r>>>=0,n>>>=0,o>>>=0,u>>>=0,this===e)return 0;let h=u-o,l=n-r,p=Math.min(h,l),d=this.slice(o,u),y=e.slice(r,n);for(let e=0;e<p;++e)if(d[e]!==y[e]){h=d[e],l=y[e];break}return h<l?-1:l<h?1:0},"compare"),a(On,"bidirectionalIndexOf"),a(Bn,"arrayIndexOf"),f.prototype.includes=a(function(e,r,n){return -1!==this.indexOf(e,r,n)},"includes"),f.prototype.indexOf=a(function(e,r,n){return On(this,e,r,n,!0)},"indexOf"),f.prototype.lastIndexOf=a(function(e,r,n){return On(this,e,r,n,!1)},"lastIndexOf"),a(So,"hexWrite"),a(xo,"utf8Write"),a(Eo,"asciiWrite"),a(vo,"base64Write"),a(_o,"ucs2Write"),f.prototype.write=a(function(e,r,n,o){if(void 0===r)o="utf8",n=this.length,r=0;else if(void 0===n&&"string"==typeof r)o=r,n=this.length,r=0;else if(isFinite(r))r>>>=0,isFinite(n)?(n>>>=0,void 0===o&&(o="utf8")):(o=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let u=this.length-r;if((void 0===n||n>u)&&(n=u),e.length>0&&(n<0||r<0)||r>this.length)throw RangeError("Attempt to write outside buffer bounds");o||(o="utf8");let h=!1;for(;;)switch(o){case"hex":return So(this,e,r,n);case"utf8":case"utf-8":return xo(this,e,r,n);case"ascii":case"latin1":case"binary":return Eo(this,e,r,n);case"base64":return vo(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _o(this,e,r,n);default:if(h)throw TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),h=!0}},"write"),f.prototype.toJSON=a(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON"),a(Ao,"base64Slice"),a(kn,"utf8Slice"),a(Co,"decodeCodePointsArray"),a(Io,"asciiSlice"),a(To,"latin1Slice"),a(Po,"hexSlice"),a(Bo,"utf16leSlice"),f.prototype.slice=a(function(e,r){let n=this.length;e=~~e,r=void 0===r?n:~~r,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),r<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<e&&(r=e);let o=this.subarray(e,r);return Object.setPrototypeOf(o,f.prototype),o},"slice"),a(U,"checkOffset"),f.prototype.readUintLE=f.prototype.readUIntLE=a(function(e,r,n){e>>>=0,r>>>=0,n||U(e,r,this.length);let o=this[e],u=1,h=0;for(;++h<r&&(u*=256);)o+=this[e+h]*u;return o},"readUIntLE"),f.prototype.readUintBE=f.prototype.readUIntBE=a(function(e,r,n){e>>>=0,r>>>=0,n||U(e,r,this.length);let o=this[e+--r],u=1;for(;r>0&&(u*=256);)o+=this[e+--r]*u;return o},"readUIntBE"),f.prototype.readUint8=f.prototype.readUInt8=a(function(e,r){return e>>>=0,r||U(e,1,this.length),this[e]},"readUInt8"),f.prototype.readUint16LE=f.prototype.readUInt16LE=a(function(e,r){return e>>>=0,r||U(e,2,this.length),this[e]|this[e+1]<<8},"readUInt16LE"),f.prototype.readUint16BE=f.prototype.readUInt16BE=a(function(e,r){return e>>>=0,r||U(e,2,this.length),this[e]<<8|this[e+1]},"readUInt16BE"),f.prototype.readUint32LE=f.prototype.readUInt32LE=a(function(e,r){return e>>>=0,r||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},"readUInt32LE"),f.prototype.readUint32BE=f.prototype.readUInt32BE=a(function(e,r){return e>>>=0,r||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},"readUInt32BE"),f.prototype.readBigUInt64LE=me(a(function(e){Be(e>>>=0,"offset");let r=this[e],n=this[e+7];(void 0===r||void 0===n)&&je(e,this.length-8);let o=r+256*this[++e]+65536*this[++e]+16777216*this[++e],u=this[++e]+256*this[++e]+65536*this[++e]+16777216*n;return BigInt(o)+(BigInt(u)<<BigInt(32))},"readBigUInt64LE")),f.prototype.readBigUInt64BE=me(a(function(e){Be(e>>>=0,"offset");let r=this[e],n=this[e+7];(void 0===r||void 0===n)&&je(e,this.length-8);let o=16777216*r+65536*this[++e]+256*this[++e]+this[++e],u=16777216*this[++e]+65536*this[++e]+256*this[++e]+n;return(BigInt(o)<<BigInt(32))+BigInt(u)},"readBigUInt64BE")),f.prototype.readIntLE=a(function(e,r,n){e>>>=0,r>>>=0,n||U(e,r,this.length);let o=this[e],u=1,h=0;for(;++h<r&&(u*=256);)o+=this[e+h]*u;return o>=(u*=128)&&(o-=Math.pow(2,8*r)),o},"readIntLE"),f.prototype.readIntBE=a(function(e,r,n){e>>>=0,r>>>=0,n||U(e,r,this.length);let o=r,u=1,h=this[e+--o];for(;o>0&&(u*=256);)h+=this[e+--o]*u;return h>=(u*=128)&&(h-=Math.pow(2,8*r)),h},"readIntBE"),f.prototype.readInt8=a(function(e,r){return e>>>=0,r||U(e,1,this.length),128&this[e]?-((255-this[e]+1)*1):this[e]},"readInt8"),f.prototype.readInt16LE=a(function(e,r){e>>>=0,r||U(e,2,this.length);let n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},"readInt16LE"),f.prototype.readInt16BE=a(function(e,r){e>>>=0,r||U(e,2,this.length);let n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},"readInt16BE"),f.prototype.readInt32LE=a(function(e,r){return e>>>=0,r||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},"readInt32LE"),f.prototype.readInt32BE=a(function(e,r){return e>>>=0,r||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},"readInt32BE"),f.prototype.readBigInt64LE=me(a(function(e){Be(e>>>=0,"offset");let r=this[e],n=this[e+7];return(void 0===r||void 0===n)&&je(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24))<<BigInt(32))+BigInt(r+256*this[++e]+65536*this[++e]+16777216*this[++e])},"readBigInt64LE")),f.prototype.readBigInt64BE=me(a(function(e){Be(e>>>=0,"offset");let r=this[e],n=this[e+7];return(void 0===r||void 0===n)&&je(e,this.length-8),(BigInt((r<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+n)},"readBigInt64BE")),f.prototype.readFloatLE=a(function(e,r){return e>>>=0,r||U(e,4,this.length),n.read(this,e,!0,23,4)},"readFloatLE"),f.prototype.readFloatBE=a(function(e,r){return e>>>=0,r||U(e,4,this.length),n.read(this,e,!1,23,4)},"readFloatBE"),f.prototype.readDoubleLE=a(function(e,r){return e>>>=0,r||U(e,8,this.length),n.read(this,e,!0,52,8)},"readDoubleLE"),f.prototype.readDoubleBE=a(function(e,r){return e>>>=0,r||U(e,8,this.length),n.read(this,e,!1,52,8)},"readDoubleBE"),a(z,"checkInt"),f.prototype.writeUintLE=f.prototype.writeUIntLE=a(function(e,r,n,o){if(e=+e,r>>>=0,n>>>=0,!o){let o=Math.pow(2,8*n)-1;z(this,e,r,n,o,0)}let u=1,h=0;for(this[r]=255&e;++h<n&&(u*=256);)this[r+h]=e/u&255;return r+n},"writeUIntLE"),f.prototype.writeUintBE=f.prototype.writeUIntBE=a(function(e,r,n,o){if(e=+e,r>>>=0,n>>>=0,!o){let o=Math.pow(2,8*n)-1;z(this,e,r,n,o,0)}let u=n-1,h=1;for(this[r+u]=255&e;--u>=0&&(h*=256);)this[r+u]=e/h&255;return r+n},"writeUIntBE"),f.prototype.writeUint8=f.prototype.writeUInt8=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,1,255,0),this[r]=255&e,r+1},"writeUInt8"),f.prototype.writeUint16LE=f.prototype.writeUInt16LE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,2,65535,0),this[r]=255&e,this[r+1]=e>>>8,r+2},"writeUInt16LE"),f.prototype.writeUint16BE=f.prototype.writeUInt16BE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=255&e,r+2},"writeUInt16BE"),f.prototype.writeUint32LE=f.prototype.writeUInt32LE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e,r+4},"writeUInt32LE"),f.prototype.writeUint32BE=f.prototype.writeUInt32BE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},"writeUInt32BE"),a(Un,"wrtBigUInt64LE"),a(qn,"wrtBigUInt64BE"),f.prototype.writeBigUInt64LE=me(a(function(e,r=0){return Un(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),f.prototype.writeBigUInt64BE=me(a(function(e,r=0){return qn(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),f.prototype.writeIntLE=a(function(e,r,n,o){if(e=+e,r>>>=0,!o){let o=Math.pow(2,8*n-1);z(this,e,r,n,o-1,-o)}let u=0,h=1,l=0;for(this[r]=255&e;++u<n&&(h*=256);)e<0&&0===l&&0!==this[r+u-1]&&(l=1),this[r+u]=(e/h>>0)-l&255;return r+n},"writeIntLE"),f.prototype.writeIntBE=a(function(e,r,n,o){if(e=+e,r>>>=0,!o){let o=Math.pow(2,8*n-1);z(this,e,r,n,o-1,-o)}let u=n-1,h=1,l=0;for(this[r+u]=255&e;--u>=0&&(h*=256);)e<0&&0===l&&0!==this[r+u+1]&&(l=1),this[r+u]=(e/h>>0)-l&255;return r+n},"writeIntBE"),f.prototype.writeInt8=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=255&e,r+1},"writeInt8"),f.prototype.writeInt16LE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,2,32767,-32768),this[r]=255&e,this[r+1]=e>>>8,r+2},"writeInt16LE"),f.prototype.writeInt16BE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=255&e,r+2},"writeInt16BE"),f.prototype.writeInt32LE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,4,2147483647,-2147483648),this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4},"writeInt32LE"),f.prototype.writeInt32BE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},"writeInt32BE"),f.prototype.writeBigInt64LE=me(a(function(e,r=0){return Un(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),f.prototype.writeBigInt64BE=me(a(function(e,r=0){return qn(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE")),a(Nn,"checkIEEE754"),a(Qn,"writeFloat"),f.prototype.writeFloatLE=a(function(e,r,n){return Qn(this,e,r,!0,n)},"writeFloatLE"),f.prototype.writeFloatBE=a(function(e,r,n){return Qn(this,e,r,!1,n)},"writeFloatBE"),a(Wn,"writeDouble"),f.prototype.writeDoubleLE=a(function(e,r,n){return Wn(this,e,r,!0,n)},"writeDoubleLE"),f.prototype.writeDoubleBE=a(function(e,r,n){return Wn(this,e,r,!1,n)},"writeDoubleBE"),f.prototype.copy=a(function(e,r,n,o){if(!f.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),o||0===o||(o=this.length),r>=e.length&&(r=e.length),r||(r=0),o>0&&o<n&&(o=n),o===n||0===e.length||0===this.length)return 0;if(r<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(o<0)throw RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-r<o-n&&(o=e.length-r+n);let u=o-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(r,n,o):Uint8Array.prototype.set.call(e,this.subarray(n,o),r),u},"copy"),f.prototype.fill=a(function(e,r,n,o){let u;if("string"==typeof e){if("string"==typeof r?(o=r,r=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),void 0!==o&&"string"!=typeof o)throw TypeError("encoding must be a string");if("string"==typeof o&&!f.isEncoding(o))throw TypeError("Unknown encoding: "+o);if(1===e.length){let r=e.charCodeAt(0);("utf8"===o&&r<128||"latin1"===o)&&(e=r)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw RangeError("Out of range index");if(n<=r)return this;if(r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(u=r;u<n;++u)this[u]=e;else{let h=f.isBuffer(e)?e:f.from(e,o),l=h.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(u=0;u<n-r;++u)this[u+r]=h[u%l]}return this},"fill");var u={};function Dt(e,r,n){var o;u[e]=(a(o=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:r.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}},"NodeError"),o)}function Rn(e){let r="",n=e.length,o="-"===e[0]?1:0;for(;n>=o+4;n-=3)r=`_${e.slice(n-3,n)}${r}`;return`${e.slice(0,n)}${r}`}function Lo(e,r,n){Be(r,"offset"),(void 0===e[r]||void 0===e[r+n])&&je(r,e.length-(n+1))}function jn(e,r,n,o,h,l){if(e>n||e<r){let o="bigint"==typeof r?"n":"",h;throw h=l>3?0===r||r===BigInt(0)?`>= 0${o} and < 2${o} ** ${(l+1)*8}${o}`:`>= -(2${o} ** ${(l+1)*8-1}${o}) and \
< 2 ** ${(l+1)*8-1}${o}`:`>= ${r}${o} and <= ${n}${o}`,new u.ERR_OUT_OF_RANGE("value",h,e)}Lo(o,h,l)}function Be(e,r){if("number"!=typeof e)throw new u.ERR_INVALID_ARG_TYPE(r,"number",e)}function je(e,r,n){throw Math.floor(e)!==e?(Be(e,n),new u.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):r<0?new u.ERR_BUFFER_OUT_OF_BOUNDS:new u.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${r}`,e)}a(Dt,"E"),Dt("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Dt("ERR_INVALID_ARG_TYPE",function(e,r){return`The "${e}" argum\
ent must be of type number. Received type ${typeof r}`},TypeError),Dt("ERR_OUT_OF_RANGE",function(e,r,n){let o=`The value of "${e}" is out of range.`,u=n;return Number.isInteger(n)&&Math.abs(n)>4294967296?u=Rn(String(n)):"bigint"==typeof n&&(u=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(u=Rn(u)),u+="n"),o+=` It\
 must be ${r}. Received ${u}`},RangeError),a(Rn,"addNumericalSeparator"),a(Lo,"checkBounds"),a(jn,"checkIntBI"),a(Be,"validateNumber"),a(je,"boundsError");var h=/[^+/0-9A-Za-z-_]/g;function Fo(e){if((e=(e=e.split("=")[0]).trim().replace(h,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function Rt(e,r){r=r||1/0;let n,o=e.length,u=null,h=[];for(let l=0;l<o;++l){if((n=e.charCodeAt(l))>55295&&n<57344){if(!u){if(n>56319||l+1===o){(r-=3)>-1&&h.push(239,191,189);continue}u=n;continue}if(n<56320){(r-=3)>-1&&h.push(239,191,189),u=n;continue}n=(u-55296<<10|n-56320)+65536}else u&&(r-=3)>-1&&h.push(239,191,189);if(u=null,n<128){if((r-=1)<0)break;h.push(n)}else if(n<2048){if((r-=2)<0)break;h.push(n>>6|192,63&n|128)}else if(n<65536){if((r-=3)<0)break;h.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((r-=4)<0)break;h.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return h}function Mo(e){let r=[];for(let n=0;n<e.length;++n)r.push(255&e.charCodeAt(n));return r}function Do(e,r){let n,o,u=[];for(let h=0;h<e.length&&!((r-=2)<0);++h)o=(n=e.charCodeAt(h))>>8,u.push(n%256),u.push(o);return u}function Hn(e){return r.toByteArray(Fo(e))}function ot(e,r,n,o){let u;for(u=0;u<o&&!(u+n>=r.length||u>=e.length);++u)r[u+n]=e[u];return u}function ae(e,r){return e instanceof r||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===r.name}function Ot(e){return e!=e}a(Fo,"base64clean"),a(Rt,"utf8ToBytes"),a(Mo,"asciiToBytes"),a(Do,"utf16leToBytes"),a(Hn,"base64ToBytes"),a(ot,"blitBuffer"),a(ae,"isInstance"),a(Ot,"numberIsNaN");var l=function(){let e="0123456789abcdef",r=Array(256);for(let n=0;n<16;++n){let o=16*n;for(let u=0;u<16;++u)r[o+u]=e[n]+e[u]}return r}();function me(e){return typeof BigInt>"u"?ko:e}function ko(){throw Error("BigInt not supported")}a(me,"defineBigIntMethod"),a(ko,"BufferBigIntNotDefined")}),E=K(()=>{o=globalThis,u=globalThis.setImmediate??(e=>setTimeout(e,0)),globalThis.clearImmediate??(e=>clearTimeout(e)),(h=globalThis.crypto??{}).subtle??(h.subtle={}),l="function"==typeof globalThis.Buffer&&"function"==typeof globalThis.Buffer.allocUnsafe?globalThis.Buffer:_().Buffer,(p=globalThis.process??{}).env??(p.env={});try{p.nextTick(()=>{})}catch{let e=Promise.resolve();p.nextTick=e.then.bind(e)}}),A=I((e,r)=>{E();var n,o="object"==typeof Reflect?Reflect:null,u=o&&"function"==typeof o.apply?o.apply:a(function(e,r,n){return Function.prototype.apply.call(e,r,n)},"ReflectApply");function Uo(e){console&&console.warn&&console.warn(e)}n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?a(function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))},"ReflectOwnKeys"):a(function(e){return Object.getOwnPropertyNames(e)},"ReflectOwnKeys"),a(Uo,"ProcessEmitWarning");var h=Number.isNaN||a(function(e){return e!=e},"NumberIsNaN");function B(){B.init.call(this)}a(B,"EventEmitter"),r.exports=B,r.exports.once=Wo,B.EventEmitter=B,B.prototype._events=void 0,B.prototype._eventsCount=0,B.prototype._maxListeners=void 0;var l=10;function ut(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function zn(e){return void 0===e._maxListeners?B.defaultMaxListeners:e._maxListeners}function Yn(e,r,n,o){var u,h,l;if(ut(n),void 0===(h=e._events)?(h=e._events=Object.create(null),e._eventsCount=0):(void 0!==h.newListener&&(e.emit("newListener",r,n.listener?n.listener:n),h=e._events),l=h[r]),void 0===l)l=h[r]=n,++e._eventsCount;else if("function"==typeof l?l=h[r]=o?[n,l]:[l,n]:o?l.unshift(n):l.push(n),(u=zn(e))>0&&l.length>u&&!l.warned){l.warned=!0;var p=Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=e,p.type=r,p.count=l.length,Uo(p)}return e}function qo(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Zn(e,r,n){var o={fired:!1,wrapFn:void 0,target:e,type:r,listener:n},u=qo.bind(o);return u.listener=n,o.wrapFn=u,u}function Jn(e,r,n){var o=e._events;if(void 0===o)return[];var u=o[r];return void 0===u?[]:"function"==typeof u?n?[u.listener||u]:[u]:n?Qo(u):ei(u,u.length)}function Xn(e){var r=this._events;if(void 0!==r){var n=r[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function ei(e,r){for(var n=Array(r),o=0;o<r;++o)n[o]=e[o];return n}function No(e,r){for(;r+1<e.length;r++)e[r]=e[r+1];e.pop()}function Qo(e){for(var r=Array(e.length),n=0;n<r.length;++n)r[n]=e[n].listener||e[n];return r}function Wo(e,r){return new Promise(function(n,o){function i(n){e.removeListener(r,s),o(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}a(i,"errorListener"),a(s,"resolver"),ti(e,r,s,{once:!0}),"error"!==r&&jo(e,i,{once:!0})})}function jo(e,r,n){"function"==typeof e.on&&ti(e,"error",r,n)}function ti(e,r,n,o){if("function"==typeof e.on)o.once?e.once(r,n):e.on(r,n);else if("function"==typeof e.addEventListener)e.addEventListener(r,a(function i(u){o.once&&e.removeEventListener(r,i),n(u)},"wrapListener"));else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}a(ut,"checkListener"),Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||h(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),B.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=a(function(e){if("number"!=typeof e||e<0||h(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},"setMaxListeners"),a(zn,"_getMaxListeners"),B.prototype.getMaxListeners=a(function(){return zn(this)},"getMaxListeners"),B.prototype.emit=a(function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var o="error"===e,h=this._events;if(void 0!==h)o=o&&void 0===h.error;else if(!o)return!1;if(o){if(r.length>0&&(l=r[0]),l instanceof Error)throw l;var l,p=Error("Unhandled error."+(l?" ("+l.message+")":""));throw p.context=l,p}var d=h[e];if(void 0===d)return!1;if("function"==typeof d)u(d,this,r);else for(var y=d.length,g=ei(d,y),n=0;n<y;++n)u(g[n],this,r);return!0},"emit"),a(Yn,"_addListener"),B.prototype.addListener=a(function(e,r){return Yn(this,e,r,!1)},"addListener"),B.prototype.on=B.prototype.addListener,B.prototype.prependListener=a(function(e,r){return Yn(this,e,r,!0)},"prependListener"),a(qo,"onceWrapper"),a(Zn,"_onceWrap"),B.prototype.once=a(function(e,r){return ut(r),this.on(e,Zn(this,e,r)),this},"once"),B.prototype.prependOnceListener=a(function(e,r){return ut(r),this.prependListener(e,Zn(this,e,r)),this},"prependOnceListener"),B.prototype.removeListener=a(function(e,r){var n,o,u,h,l;if(ut(r),void 0===(o=this._events)||void 0===(n=o[e]))return this;if(n===r||n.listener===r)0==--this._eventsCount?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||r));else if("function"!=typeof n){for(u=-1,h=n.length-1;h>=0;h--)if(n[h]===r||n[h].listener===r){l=n[h].listener,u=h;break}if(u<0)return this;0===u?n.shift():No(n,u),1===n.length&&(o[e]=n[0]),void 0!==o.removeListener&&this.emit("removeListener",e,l||r)}return this},"removeListener"),B.prototype.off=B.prototype.removeListener,B.prototype.removeAllListeners=a(function(e){var r,n,o;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var u,h=Object.keys(n);for(o=0;o<h.length;++o)"removeListener"!==(u=h[o])&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(r=n[e]))this.removeListener(e,r);else if(void 0!==r)for(o=r.length-1;o>=0;o--)this.removeListener(e,r[o]);return this},"removeAllListeners"),a(Jn,"_listeners"),B.prototype.listeners=a(function(e){return Jn(this,e,!0)},"listeners"),B.prototype.rawListeners=a(function(e){return Jn(this,e,!1)},"rawListeners"),B.listenerCount=function(e,r){return"function"==typeof e.listenerCount?e.listenerCount(r):Xn.call(e,r)},B.prototype.listenerCount=Xn,a(Xn,"listenerCount"),B.prototype.eventNames=a(function(){return this._eventsCount>0?n(this._events):[]},"eventNames"),a(ei,"arrayClone"),a(No,"spliceOne"),a(Qo,"unwrapListeners"),a(Wo,"once"),a(jo,"addErrorHandlerIfEventEmitter"),a(ti,"eventTargetAgnosticAddListener")}),C={};X(C,{default:()=>L});var L,R=K(()=>{E(),L={}});function $e(e){let r=1779033703,n=3144134277,o=1013904242,u=2773480762,h=1359893119,l=2600822924,p=528734635,d=1541459225,y=0,g=0,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],b=a((e,r)=>e>>>r|e<<32-r,"rrot"),v=new Uint32Array(64),w=new Uint8Array(64),S=a(()=>{for(let e=0,r=0;e<16;e++,r+=4)v[e]=w[r]<<24|w[r+1]<<16|w[r+2]<<8|w[r+3];for(let e=16;e<64;e++){let r=b(v[e-15],7)^b(v[e-15],18)^v[e-15]>>>3,n=b(v[e-2],17)^b(v[e-2],19)^v[e-2]>>>10;v[e]=v[e-16]+r+v[e-7]+n|0}let e=r,y=n,S=o,_=u,E=h,A=l,C=p,L=d;for(let r=0;r<64;r++){let n=L+(b(E,6)^b(E,11)^b(E,25))+(E&A^~E&C)+m[r]+v[r]|0,o=(b(e,2)^b(e,13)^b(e,22))+(e&y^e&S^y&S)|0;L=C,C=A,A=E,E=_+n|0,_=S,S=y,y=e,e=n+o|0}r=r+e|0,n=n+y|0,o=o+S|0,u=u+_|0,h=h+E|0,l=l+A|0,p=p+C|0,d=d+L|0,g=0},"process"),_=a(e=>{"string"==typeof e&&(e=new TextEncoder().encode(e));for(let r=0;r<e.length;r++)w[g++]=e[r],64===g&&S();y+=e.length},"add"),E=a(()=>{if(w[g++]=128,64==g&&S(),g+8>64){for(;g<64;)w[g++]=0;S()}for(;g<58;)w[g++]=0;let e=8*y;w[g++]=e/1099511627776&255,w[g++]=e/4294967296&255,w[g++]=e>>>24,w[g++]=e>>>16&255,w[g++]=e>>>8&255,w[g++]=255&e,S();let m=new Uint8Array(32);return m[0]=r>>>24,m[1]=r>>>16&255,m[2]=r>>>8&255,m[3]=255&r,m[4]=n>>>24,m[5]=n>>>16&255,m[6]=n>>>8&255,m[7]=255&n,m[8]=o>>>24,m[9]=o>>>16&255,m[10]=o>>>8&255,m[11]=255&o,m[12]=u>>>24,m[13]=u>>>16&255,m[14]=u>>>8&255,m[15]=255&u,m[16]=h>>>24,m[17]=h>>>16&255,m[18]=h>>>8&255,m[19]=255&h,m[20]=l>>>24,m[21]=l>>>16&255,m[22]=l>>>8&255,m[23]=255&l,m[24]=p>>>24,m[25]=p>>>16&255,m[26]=p>>>8&255,m[27]=255&p,m[28]=d>>>24,m[29]=d>>>16&255,m[30]=d>>>8&255,m[31]=255&d,m},"digest");return void 0===e?{add:_,digest:E}:(_(e),E())}var P,M,D=K(()=>{E(),a($e,"sha256")}),F=K(()=>{E(),a(P=class O{constructor(){T(this,"_dataLength",0),T(this,"_bufferLength",0),T(this,"_state",new Int32Array(4)),T(this,"_buffer",new ArrayBuffer(68)),T(this,"_buffer8"),T(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,r=!1){return this.onePassHasher.start().appendByteArray(e).end(r)}static hashStr(e,r=!1){return this.onePassHasher.start().appendStr(e).end(r)}static hashAsciiStr(e,r=!1){return this.onePassHasher.start().appendAsciiStr(e).end(r)}static _hex(e){let r=O.hexChars,n=O.hexOut,o,u,h,l;for(l=0;l<4;l+=1)for(u=8*l,o=e[l],h=0;h<8;h+=2)n[u+1+h]=r.charAt(15&o),o>>>=4,n[u+0+h]=r.charAt(15&o),o>>>=4;return n.join("")}static _md5cycle(e,r){let n=e[0],o=e[1],u=e[2],h=e[3];n+=(o&u|~o&h)+r[0]-680876936|0,h+=((n=(n<<7|n>>>25)+o|0)&o|~n&u)+r[1]-389564586|0,u+=((h=(h<<12|h>>>20)+n|0)&n|~h&o)+r[2]+606105819|0,o+=((u=(u<<17|u>>>15)+h|0)&h|~u&n)+r[3]-1044525330|0,n+=((o=(o<<22|o>>>10)+u|0)&u|~o&h)+r[4]-176418897|0,h+=((n=(n<<7|n>>>25)+o|0)&o|~n&u)+r[5]+1200080426|0,u+=((h=(h<<12|h>>>20)+n|0)&n|~h&o)+r[6]-1473231341|0,o+=((u=(u<<17|u>>>15)+h|0)&h|~u&n)+r[7]-45705983|0,n+=((o=(o<<22|o>>>10)+u|0)&u|~o&h)+r[8]+1770035416|0,h+=((n=(n<<7|n>>>25)+o|0)&o|~n&u)+r[9]-1958414417|0,u+=((h=(h<<12|h>>>20)+n|0)&n|~h&o)+r[10]-42063|0,o+=((u=(u<<17|u>>>15)+h|0)&h|~u&n)+r[11]-1990404162|0,n+=((o=(o<<22|o>>>10)+u|0)&u|~o&h)+r[12]+1804603682|0,h+=((n=(n<<7|n>>>25)+o|0)&o|~n&u)+r[13]-40341101|0,u+=((h=(h<<12|h>>>20)+n|0)&n|~h&o)+r[14]-1502002290|0,o+=((u=(u<<17|u>>>15)+h|0)&h|~u&n)+r[15]+1236535329|0,n+=((o=(o<<22|o>>>10)+u|0)&h|u&~h)+r[1]-165796510|0,h+=((n=(n<<5|n>>>27)+o|0)&u|o&~u)+r[6]-1069501632|0,u+=((h=(h<<9|h>>>23)+n|0)&o|n&~o)+r[11]+643717713|0,o+=((u=(u<<14|u>>>18)+h|0)&n|h&~n)+r[0]-373897302|0,n+=((o=(o<<20|o>>>12)+u|0)&h|u&~h)+r[5]-701558691|0,h+=((n=(n<<5|n>>>27)+o|0)&u|o&~u)+r[10]+38016083|0,u+=((h=(h<<9|h>>>23)+n|0)&o|n&~o)+r[15]-660478335|0,o+=((u=(u<<14|u>>>18)+h|0)&n|h&~n)+r[4]-405537848|0,n+=((o=(o<<20|o>>>12)+u|0)&h|u&~h)+r[9]+568446438|0,h+=((n=(n<<5|n>>>27)+o|0)&u|o&~u)+r[14]-1019803690|0,u+=((h=(h<<9|h>>>23)+n|0)&o|n&~o)+r[3]-187363961|0,o+=((u=(u<<14|u>>>18)+h|0)&n|h&~n)+r[8]+1163531501|0,n+=((o=(o<<20|o>>>12)+u|0)&h|u&~h)+r[13]-1444681467|0,h+=((n=(n<<5|n>>>27)+o|0)&u|o&~u)+r[2]-51403784|0,u+=((h=(h<<9|h>>>23)+n|0)&o|n&~o)+r[7]+1735328473|0,o+=((u=(u<<14|u>>>18)+h|0)&n|h&~n)+r[12]-1926607734|0,n+=((o=(o<<20|o>>>12)+u|0)^u^h)+r[5]-378558|0,h+=((n=(n<<4|n>>>28)+o|0)^o^u)+r[8]-2022574463|0,u+=((h=(h<<11|h>>>21)+n|0)^n^o)+r[11]+1839030562|0,o+=((u=(u<<16|u>>>16)+h|0)^h^n)+r[14]-35309556|0,n+=((o=(o<<23|o>>>9)+u|0)^u^h)+r[1]-1530992060|0,h+=((n=(n<<4|n>>>28)+o|0)^o^u)+r[4]+1272893353|0,u+=((h=(h<<11|h>>>21)+n|0)^n^o)+r[7]-155497632|0,o+=((u=(u<<16|u>>>16)+h|0)^h^n)+r[10]-1094730640|0,n+=((o=(o<<23|o>>>9)+u|0)^u^h)+r[13]+681279174|0,h+=((n=(n<<4|n>>>28)+o|0)^o^u)+r[0]-358537222|0,u+=((h=(h<<11|h>>>21)+n|0)^n^o)+r[3]-722521979|0,o+=((u=(u<<16|u>>>16)+h|0)^h^n)+r[6]+76029189|0,n+=((o=(o<<23|o>>>9)+u|0)^u^h)+r[9]-640364487|0,h+=((n=(n<<4|n>>>28)+o|0)^o^u)+r[12]-421815835|0,u+=((h=(h<<11|h>>>21)+n|0)^n^o)+r[15]+530742520|0,o+=((u=(u<<16|u>>>16)+h|0)^h^n)+r[2]-995338651|0,o=(o<<23|o>>>9)+u|0,n+=(u^(o|~h))+r[0]-198630844|0,n=(n<<6|n>>>26)+o|0,h+=(o^(n|~u))+r[7]+1126891415|0,h=(h<<10|h>>>22)+n|0,u+=(n^(h|~o))+r[14]-1416354905|0,u=(u<<15|u>>>17)+h|0,o+=(h^(u|~n))+r[5]-57434055|0,o=(o<<21|o>>>11)+u|0,n+=(u^(o|~h))+r[12]+1700485571|0,n=(n<<6|n>>>26)+o|0,h+=(o^(n|~u))+r[3]-1894986606|0,h=(h<<10|h>>>22)+n|0,u+=(n^(h|~o))+r[10]-1051523|0,u=(u<<15|u>>>17)+h|0,o+=(h^(u|~n))+r[1]-2054922799|0,o=(o<<21|o>>>11)+u|0,n+=(u^(o|~h))+r[8]+1873313359|0,n=(n<<6|n>>>26)+o|0,h+=(o^(n|~u))+r[15]-30611744|0,h=(h<<10|h>>>22)+n|0,u+=(n^(h|~o))+r[6]-1560198380|0,u=(u<<15|u>>>17)+h|0,o+=(h^(u|~n))+r[13]+1309151649|0,o=(o<<21|o>>>11)+u|0,n+=(u^(o|~h))+r[4]-145523070|0,n=(n<<6|n>>>26)+o|0,h+=(o^(n|~u))+r[11]-1120210379|0,h=(h<<10|h>>>22)+n|0,u+=(n^(h|~o))+r[2]+718787259|0,u=(u<<15|u>>>17)+h|0,o+=(h^(u|~n))+r[9]-343485551|0,o=(o<<21|o>>>11)+u|0,e[0]=n+e[0]|0,e[1]=o+e[1]|0,e[2]=u+e[2]|0,e[3]=h+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(O.stateIdentity),this}appendStr(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,u,h;for(h=0;h<e.length;h+=1){if((u=e.charCodeAt(h))<128)r[o++]=u;else if(u<2048)r[o++]=(u>>>6)+192,r[o++]=63&u|128;else if(u<55296||u>56319)r[o++]=(u>>>12)+224,r[o++]=u>>>6&63|128,r[o++]=63&u|128;else{if((u=(u-55296)*1024+(e.charCodeAt(++h)-56320)+65536)>1114111)throw Error("Unicode standard supports code points up to U+10FFFF");r[o++]=(u>>>18)+240,r[o++]=u>>>12&63|128,r[o++]=u>>>6&63|128,r[o++]=63&u|128}o>=64&&(this._dataLength+=64,O._md5cycle(this._state,n),o-=64,n[0]=n[16])}return this._bufferLength=o,this}appendAsciiStr(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,u,h=0;for(;;){for(u=Math.min(e.length-h,64-o);u--;)r[o++]=e.charCodeAt(h++);if(o<64)break;this._dataLength+=64,O._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}appendByteArray(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,u,h=0;for(;;){for(u=Math.min(e.length-h,64-o);u--;)r[o++]=e[h++];if(o<64)break;this._dataLength+=64,O._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let r=e.buffer,n=e.state,o=this._state,u;for(this._dataLength=e.length,this._bufferLength=e.buflen,o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],u=0;u<r.length;u+=1)this._buffer8[u]=r.charCodeAt(u)}end(e=!1){let r=this._bufferLength,n=this._buffer8,o=this._buffer32,u=(r>>2)+1;this._dataLength+=r;let h=8*this._dataLength;if(n[r]=128,n[r+1]=n[r+2]=n[r+3]=0,o.set(O.buffer32Identity.subarray(u),u),r>55&&(O._md5cycle(this._state,o),o.set(O.buffer32Identity)),h<=4294967295)o[14]=h;else{let e=h.toString(16).match(/(.*?)(.{0,8})$/);if(null===e)return;let r=parseInt(e[2],16),n=parseInt(e[1],16)||0;o[14]=r,o[15]=n}return O._md5cycle(this._state,o),e?this._state:O._hex(this._state)}},"Md5"),T(P,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),T(P,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),T(P,"hexChars","0123456789abcdef"),T(P,"hexOut",[]),T(P,"onePassHasher",new P),M=P}),N={};function Go(e){return h.getRandomValues(l.alloc(e))}function $o(e){if("sha256"===e)return{update:function(e){return{digest:function(){return l.from($e(e))}}}};if("md5"===e)return{update:function(e){return{digest:function(){return"string"==typeof e?M.hashStr(e):M.hashByteArray(e)}}}};throw Error(`Hash type '${e}' not supported`)}function Ko(e,r){if("sha256"!==e)throw Error(`Only sha256 is supported (requested: '${e}')`);return{update:function(e){return{digest:function(){"string"==typeof r&&(r=new TextEncoder().encode(r)),"string"==typeof e&&(e=new TextEncoder().encode(e));let n=r.length;if(n>64)r=$e(r);else if(n<64){let e=new Uint8Array(64);e.set(r),r=e}let o=new Uint8Array(64),u=new Uint8Array(64);for(let e=0;e<64;e++)o[e]=54^r[e],u[e]=92^r[e];let h=new Uint8Array(e.length+64);h.set(o,0),h.set(e,64);let p=new Uint8Array(96);return p.set(u,0),p.set($e(h),64),l.from($e(p))}}}}}X(N,{createHash:()=>$o,createHmac:()=>Ko,randomBytes:()=>Go});var Q=K(()=>{E(),D(),F(),a(Go,"randomBytes"),a($o,"createHash"),a(Ko,"createHmac")}),q=I(e=>{E(),e.parse=function(e,r){return new n(e,r).parse()};var r=class ct{constructor(e,r){this.source=e,this.transform=r||Vo,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return"\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var r;(this.recorded.length>0||e)&&("NULL"!==(r=this.recorded.join(""))||e||(r=null),null!==r&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if("["===this.source[0])for(;!this.isEof()&&"="!==this.nextCharacter().value;);}parse(e){var r,n,o;for(this.consumeDimensions();!this.isEof();)if("{"!==(r=this.nextCharacter()).value||o){if("}"!==r.value||o)'"'!==r.value||r.escaped?","!==r.value||o?this.record(r.value):this.newEntry():(o&&this.newEntry(!0),o=!o);else if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else this.dimension++,this.dimension>1&&(n=new ct(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);if(0!==this.dimension)throw Error("array dimension not balanced");return this.entries}};a(r,"ArrayParser");var n=r;function Vo(e){return e}a(Vo,"identity")}),W=I((e,r)=>{E();var n=q();r.exports={create:function(e,r){return{parse:function(){return n.parse(e,r)}}}}}),$=I((e,r)=>{E();var n=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,o=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,u=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,h=/^-?infinity$/;function ea(e){var r=o.exec(e);if(r){var n=parseInt(r[1],10);r[4]&&(n=oi(n));var u=new Date(n,parseInt(r[2],10)-1,r[3]);return jt(n)&&u.setFullYear(n),u}}function ta(e){if(e.endsWith("+00"))return 0;var r=u.exec(e.split(" ")[1]);if(r){var n=r[1];return"Z"===n?0:(3600*parseInt(r[2],10)+60*parseInt(r[3]||0,10)+parseInt(r[4]||0,10))*("-"===n?-1:1)*1e3}}function oi(e){return-(e-1)}function jt(e){return e>=0&&e<100}r.exports=a(function(e){if(h.test(e))return Number(e.replace("i","I"));var r=n.exec(e);if(!r)return ea(e)||null;var o=!!r[8],u=parseInt(r[1],10);o&&(u=oi(u));var l=parseInt(r[2],10)-1,p=r[3],d=parseInt(r[4],10),y=parseInt(r[5],10),g=parseInt(r[6],10),m=r[7];m=m?1e3*parseFloat(m):0;var b,v=ta(e);return null!=v?(b=new Date(Date.UTC(u,l,p,d,y,g,m)),jt(u)&&b.setUTCFullYear(u),0!==v&&b.setTime(b.getTime()-v)):(b=new Date(u,l,p,d,y,g,m),jt(u)&&b.setFullYear(u)),b},"parseDate"),a(ea,"getDate"),a(ta,"timeZoneOffset"),a(oi,"bcYearToNegativeYear"),a(jt,"is0To99")}),G=I((e,r)=>{E(),r.exports=na;var n=Object.prototype.hasOwnProperty;function na(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var u in o)n.call(o,u)&&(e[u]=o[u])}return e}a(na,"extend")}),H=I((e,r)=>{E();var n=G();function Fe(e){if(!(this instanceof Fe))return new Fe(e);n(this,ma(e))}r.exports=Fe,a(Fe,"PostgresInterval");var o=["seconds","minutes","hours","days","months","years"];Fe.prototype.toPostgres=function(){var e=o.filter(this.hasOwnProperty,this);return this.milliseconds&&0>e.indexOf("seconds")&&e.push("seconds"),0===e.length?"0":e.map(function(e){var r=this[e]||0;return"seconds"===e&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+e},this).join(" ")};var u={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},h=["years","months","days"],l=["hours","minutes","seconds"];Fe.prototype.toISOString=Fe.prototype.toISO=function(){return"P"+h.map(t,this).join("")+"T"+l.map(t,this).join("");function t(e){var r=this[e]||0;return"seconds"===e&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),r+u[e]}};var p="([+-]?\\d+)",d=new RegExp([p+"\\s+years?",p+"\\s+mons?",p+"\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map(function(e){return"("+e+")?"}).join("\\s*")),y={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},g=["hours","minutes","seconds","milliseconds"];function ya(e){return parseInt(e+"000000".slice(e.length),10)/1e3}function ma(e){if(!e)return{};var r=d.exec(e),n="-"===r[8];return Object.keys(y).reduce(function(e,o){var u=r[y[o]];return u&&(u="milliseconds"===o?ya(u):parseInt(u,10))&&(n&&~g.indexOf(o)&&(u*=-1),e[o]=u),e},{})}a(ya,"parseMilliseconds"),a(ma,"parse")}),V=I((e,r)=>{E(),r.exports=a(function(e){if(/^\\x/.test(e))return new l(e.substr(2),"hex");for(var r="",n=0;n<e.length;)if("\\"!==e[n])r+=e[n],++n;else if(/[0-7]{3}/.test(e.substr(n+1,3)))r+=String.fromCharCode(parseInt(e.substr(n+1,3),8)),n+=4;else{for(var o=1;n+o<e.length&&"\\"===e[n+o];)o++;for(var u=0;u<Math.floor(o/2);++u)r+="\\";n+=2*Math.floor(o/2)}return new l(r,"binary")},"parseBytea")}),Y=I((e,r)=>{E();var n=q(),o=W(),u=$(),h=H(),l=V();function lt(e){return a(function(r){return null===r?r:e(r)},"nullAllowed")}function bi(e){return null===e?e:"TRUE"===e||"t"===e||"true"===e||"y"===e||"yes"===e||"on"===e||"1"===e}function ga(e){return e?n.parse(e,bi):null}function wa(e){return parseInt(e,10)}function Gt(e){return e?n.parse(e,lt(wa)):null}function ba(e){return e?n.parse(e,lt(function(e){return w(e).trim()})):null}a(lt,"allowNull"),a(bi,"parseBool"),a(ga,"parseBoolArray"),a(wa,"parseBaseTenInt"),a(Gt,"parseIntegerArray"),a(ba,"parseBigIntegerArray");var p=a(function(e){return e?o.create(e,function(e){return null!==e&&(e=_(e)),e}).parse():null},"parsePointArray"),d=a(function(e){return e?o.create(e,function(e){return null!==e&&(e=parseFloat(e)),e}).parse():null},"parseFloatArray"),y=a(function(e){return e?o.create(e).parse():null},"parseStringArray"),g=a(function(e){return e?o.create(e,function(e){return null!==e&&(e=u(e)),e}).parse():null},"parseDateArray"),m=a(function(e){return e?o.create(e,function(e){return null!==e&&(e=h(e)),e}).parse():null},"parseIntervalArray"),b=a(function(e){return e?n.parse(e,lt(l)):null},"parseByteAArray"),v=a(function(e){return parseInt(e,10)},"parseInteger"),w=a(function(e){var r=String(e);return/^\d+$/.test(r)?r:e},"parseBigInteger"),S=a(function(e){return e?n.parse(e,lt(JSON.parse)):null},"parseJsonArray"),_=a(function(e){return"("!==e[0]?null:{x:parseFloat((e=e.substring(1,e.length-1).split(","))[0]),y:parseFloat(e[1])}},"parsePoint"),A=a(function(e){if("<"!==e[0]&&"("!==e[1])return null;for(var r="(",n="",o=!1,u=2;u<e.length-1;u++){if(o||(r+=e[u]),")"===e[u]){o=!0;continue}o&&","!==e[u]&&(n+=e[u])}var h=_(r);return h.radius=parseFloat(n),h},"parseCircle"),C=a(function(e){e(20,w),e(21,v),e(23,v),e(26,v),e(700,parseFloat),e(701,parseFloat),e(16,bi),e(1082,u),e(1114,u),e(1184,u),e(600,_),e(651,y),e(718,A),e(1e3,ga),e(1001,b),e(1005,Gt),e(1007,Gt),e(1028,Gt),e(1016,ba),e(1017,p),e(1021,d),e(1022,d),e(1231,d),e(1014,y),e(1015,y),e(1008,y),e(1009,y),e(1040,y),e(1041,y),e(1115,g),e(1182,g),e(1185,g),e(1186,h),e(1187,m),e(17,l),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,S),e(3807,S),e(3907,y),e(2951,y),e(791,y),e(1183,y),e(1270,y)},"init");r.exports={init:C}}),Z=I((e,r)=>{function Aa(e){var r=e.readInt32BE(0),n=e.readUInt32BE(4),o="";r<0&&(r=~r+(0===n),n=~n+1>>>0,o="-");var u,h,l,p,d,y,g="";if(u=r%1e6,r=r/1e6>>>0,n=(h=4294967296*u+n)/1e6>>>0,l=""+(h-1e6*n),0===n&&0===r)return o+l+g;for(p="",d=6-l.length,y=0;y<d;y++)p+="0";if(g=p+l+g,u=r%1e6,r=r/1e6>>>0,n=(h=4294967296*u+n)/1e6>>>0,l=""+(h-1e6*n),0===n&&0===r)return o+l+g;for(p="",d=6-l.length,y=0;y<d;y++)p+="0";if(g=p+l+g,u=r%1e6,r=r/1e6>>>0,n=(h=4294967296*u+n)/1e6>>>0,l=""+(h-1e6*n),0===n&&0===r)return o+l+g;for(p="",d=6-l.length,y=0;y<d;y++)p+="0";return g=p+l+g,o+(l=""+(h=4294967296*(u=r%1e6)+n)%1e6)+g}E(),a(Aa,"readInt8"),r.exports=Aa}),ee=I((e,r)=>{E();var n=Z(),o=a(function(e,r,n,o,u){n=n||0,o=o||!1,u=u||function(e,r,n){return e*Math.pow(2,n)+r};var h=n>>3,l=a(function(e){return o?255&~e:e},"inv"),p=255,d=8-n%8;r<d&&(p=255<<8-r&255,d=r),n&&(p>>=n%8);var y=0;n%8+r>=8&&(y=u(0,l(e[h])&p,d));for(var g=r+n>>3,m=h+1;m<g;m++)y=u(y,l(e[m]),8);var b=(r+n)%8;return b>0&&(y=u(y,l(e[g])>>8-b,b)),y},"parseBits"),u=a(function(e,r,n){var u=Math.pow(2,n-1)-1,h=o(e,1),l=o(e,n,1);if(0===l)return 0;var p=1,d=o(e,r,n+1,!1,a(function(e,r,n){0===e&&(e=1);for(var o=1;o<=n;o++)p/=2,(r&1<<n-o)>0&&(e+=p);return e},"parsePrecisionBits"));return l==Math.pow(2,n+1)-1?0===d?0===h?1/0:-1/0:NaN:(0===h?1:-1)*Math.pow(2,l-u)*d},"parseFloatFromBits"),h=a(function(e){return 1==o(e,1)?-1*(o(e,15,1,!0)+1):o(e,15,1)},"parseInt16"),l=a(function(e){return 1==o(e,1)?-1*(o(e,31,1,!0)+1):o(e,31,1)},"parseInt32"),p=a(function(e){return u(e,23,8)},"parseFloat32"),d=a(function(e){return u(e,52,11)},"parseFloat64"),y=a(function(e){var r=o(e,16,32);if(49152==r)return NaN;for(var n=Math.pow(1e4,o(e,16,16)),u=0,h=o(e,16),l=0;l<h;l++)u+=o(e,16,64+16*l)*n,n/=1e4;var p=Math.pow(10,o(e,16,48));return(0===r?1:-1)*Math.round(u*p)/p},"parseNumeric"),g=a(function(e,r){var n=o(r,1),u=o(r,63,1),h=new Date((0===n?1:-1)*u/1e3+9466848e5);return e||h.setTime(h.getTime()+6e4*h.getTimezoneOffset()),h.usec=u%1e3,h.getMicroSeconds=function(){return this.usec},h.setMicroSeconds=function(e){this.usec=e},h.getUTCMicroSeconds=function(){return this.usec},h},"parseDate"),m=a(function(e){for(var r=o(e,32),n=(o(e,32,32),o(e,32,64)),u=96,h=[],l=0;l<r;l++)h[l]=o(e,32,u),u+=64;var p=a(function(r){var n,h=o(e,32,u);return(u+=32,4294967295==h)?null:23==r||20==r?(n=o(e,8*h,u),u+=8*h,n):25==r?e.toString(this.encoding,u>>3,(u+=h<<3)>>3):void console.log("ERROR: ElementType not implemented: "+r)},"parseElement"),d=a(function(e,r){var n,o=[];if(e.length>1){var u=e.shift();for(n=0;n<u;n++)o[n]=d(e,r);e.unshift(u)}else for(n=0;n<e[0];n++)o[n]=p(r);return o},"parse");return d(h,n)},"parseArray"),b=a(function(e){return e.toString("utf8")},"parseText"),v=a(function(e){return null===e?null:o(e,8)>0},"parseBool"),w=a(function(e){e(20,n),e(21,h),e(23,l),e(26,l),e(1700,y),e(700,p),e(701,d),e(16,v),e(1114,g.bind(null,!1)),e(1184,g.bind(null,!0)),e(1e3,m),e(1007,m),e(1016,m),e(1008,m),e(1009,m),e(25,b)},"init");r.exports={init:w}}),et=I((e,r)=>{E(),r.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),er=I(e=>{E();var r=Y(),n=ee(),o=W(),u=et();e.getTypeParser=Ua,e.setTypeParser=qa,e.arrayParser=o,e.builtins=u;var h={text:{},binary:{}};function Ri(e){return String(e)}function Ua(e,r){return h[r=r||"text"]&&h[r][e]||Ri}function qa(e,r,n){"function"==typeof r&&(n=r,r="text"),h[r][e]=n}a(Ri,"noParse"),a(Ua,"getTypeParser"),a(qa,"setTypeParser"),r.init(function(e,r){h.text[e]=r}),n.init(function(e,r){h.binary[e]=r})}),en=I((e,r)=>{E(),r.exports={host:"localhost",user:"win32"===p.platform?p.env.USERNAME:p.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var n=er(),o=n.getTypeParser(20,"text"),u=n.getTypeParser(1016,"text");r.exports.__defineSetter__("parseInt8",function(e){n.setTypeParser(20,"text",e?n.getTypeParser(23,"text"):o),n.setTypeParser(1016,"text",e?n.getTypeParser(1007,"text"):u)})}),es=I((e,r)=>{E();var n=(Q(),k(N)),o=en();function Ha(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function Fi(e){for(var r="{",n=0;n<e.length;n++)n>0&&(r+=","),null===e[n]||typeof e[n]>"u"?r+="NULL":Array.isArray(e[n])?r+=Fi(e[n]):e[n]instanceof l?r+="\\\\x"+e[n].toString("hex"):r+=Ha(u(e[n]));return r+"}"}a(Ha,"escapeElement"),a(Fi,"arrayString");var u=a(function(e,r){if(null==e)return null;if(e instanceof l)return e;if(ArrayBuffer.isView(e)){var n=l.from(e.buffer,e.byteOffset,e.byteLength);return n.length===e.byteLength?n:n.slice(e.byteOffset,e.byteOffset+e.byteLength)}return e instanceof Date?o.parseInputDatesAsUTC?Ka(e):$a(e):Array.isArray(e)?Fi(e):"object"==typeof e?Ga(e,r):e.toString()},"prepareValue");function Ga(e,r){if(e&&"function"==typeof e.toPostgres){if(-1!==(r=r||[]).indexOf(e))throw Error('circular reference detected while preparing "'+e+'" for query');return r.push(e),u(e.toPostgres(u),r)}return JSON.stringify(e)}function j(e,r){for(e=""+e;e.length<r;)e="0"+e;return e}function $a(e){var r=-e.getTimezoneOffset(),n=e.getFullYear(),o=n<1;o&&(n=Math.abs(n)+1);var u=j(n,4)+"-"+j(e.getMonth()+1,2)+"-"+j(e.getDate(),2)+"T"+j(e.getHours(),2)+":"+j(e.getMinutes(),2)+":"+j(e.getSeconds(),2)+"."+j(e.getMilliseconds(),3);return r<0?(u+="-",r*=-1):u+="+",u+=j(Math.floor(r/60),2)+":"+j(r%60,2),o&&(u+=" BC"),u}function Ka(e){var r=e.getUTCFullYear(),n=r<1;n&&(r=Math.abs(r)+1);var o=j(r,4)+"-"+j(e.getUTCMonth()+1,2)+"-"+j(e.getUTCDate(),2)+"T"+j(e.getUTCHours(),2)+":"+j(e.getUTCMinutes(),2)+":"+j(e.getUTCSeconds(),2)+"."+j(e.getUTCMilliseconds(),3);return o+="+00:00",n&&(o+=" BC"),o}function Va(e,r,n){return e="string"==typeof e?{text:e}:e,r&&("function"==typeof r?e.callback=r:e.values=r),n&&(e.callback=n),e}a(Ga,"prepareObject"),a(j,"pad"),a($a,"dateToString"),a(Ka,"dateToStringUTC"),a(Va,"normalizeQueryConfig");var h=a(function(e){return n.createHash("md5").update(e,"utf-8").digest("hex")},"md5"),p=a(function(e,r,n){var o=h(r+e);return"md5"+h(l.concat([l.from(o),n]))},"postgresMd5PasswordHash");r.exports={prepareValue:a(function(e){return u(e)},"prepareValueWrapper"),normalizeQueryConfig:Va,postgresMd5PasswordHash:p,md5:h}}),eo=I((e,r)=>{E();var n=(Q(),k(N));function Ya(e){if(-1===e.indexOf("SCRAM-SHA-256"))throw Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let r=n.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:r,response:"n,,n=*,r="+r,message:"SASLInitialResponse"}}function Za(e,r,n){if("SASLInitialResponse"!==e.message)throw Error("SASL: Last message was not SASLInitialResponse");if("string"!=typeof r)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if("string"!=typeof n)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let o=eu(n);if(o.nonce.startsWith(e.clientNonce)){if(o.nonce.length===e.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var u=nu(r,l.from(o.salt,"base64"),o.iteration),h=De(u,"Client Key"),p=ru(h),d="n=*,r="+e.clientNonce,y="r="+o.nonce+",s="+o.salt+",i="+o.iteration,g="c=biws,r="+o.nonce,m=d+","+y+","+g,b=ki(h,De(p,m)).toString("base64"),v=De(u,"Server Key"),w=De(v,m);e.message="SASLResponse",e.serverSignature=w.toString("base64"),e.response=g+",p="+b}function Ja(e,r){if("SASLResponse"!==e.message)throw Error("SASL: Last message was not SASLResponse");if("string"!=typeof r)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:n}=tu(r);if(n!==e.serverSignature)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function Xa(e){if("string"!=typeof e)throw TypeError("SASL: text must be a string");return e.split("").map((r,n)=>e.charCodeAt(n)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function Di(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function Oi(e){if("string"!=typeof e)throw TypeError("SASL: attribute pairs text must be a string");return new Map(e.split(",").map(e=>{if(!/^.=/.test(e))throw Error("SASL: Invalid attribute pair entry");return[e[0],e.substring(2)]}))}function eu(e){let r=Oi(e),n=r.get("r");if(n){if(!Xa(n))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let o=r.get("s");if(o){if(!Di(o))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let u=r.get("i");if(u){if(!/^[1-9][0-9]*$/.test(u))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");return{nonce:n,salt:o,iteration:parseInt(u,10)}}function tu(e){let r=Oi(e).get("v");if(r){if(!Di(r))throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function ki(e,r){if(!l.isBuffer(e))throw TypeError("first argument must be a Buffer");if(!l.isBuffer(r))throw TypeError("second argument must be a Buffer");if(e.length!==r.length)throw Error("Buffer lengths must match");if(0===e.length)throw Error("Buffers cannot be empty");return l.from(e.map((n,o)=>e[o]^r[o]))}function ru(e){return n.createHash("sha256").update(e).digest()}function De(e,r){return n.createHmac("sha256",e).update(r).digest()}function nu(e,r,n){for(var o=De(e,l.concat([r,l.from([0,0,0,1])])),u=o,h=0;h<n-1;h++)u=ki(u,o=De(e,o));return u}a(Ya,"startSession"),a(Za,"continueSession"),a(Ja,"finalizeSession"),a(Xa,"isPrintableChars"),a(Di,"isBase64"),a(Oi,"parseAttributePairs"),a(eu,"parseServerFirstMessage"),a(tu,"parseServerFinalMessage"),a(ki,"xorBuffers"),a(ru,"sha256"),a(De,"hmacSha256"),a(nu,"Hi"),r.exports={startSession:Ya,continueSession:Za,finalizeSession:Ja}}),eh={};function iu(...e){return e.join("/")}X(eh,{join:()=>iu});var el=K(()=>{E(),a(iu,"join")}),ec={};function su(e,r){r(Error("No filesystem"))}X(ec,{stat:()=>su});var ef=K(()=>{E(),a(su,"stat")}),ep={};X(ep,{default:()=>ed});var ed,ey=K(()=>{E(),ed={}}),eg={};X(eg,{StringDecoder:()=>eb});var em,eb,ev=K(()=>{E(),a(em=class{constructor(e){T(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},"StringDecoder"),eb=em}),ew=I((e,r)=>{E();var{Transform:n}=(ey(),k(ep)),{StringDecoder:o}=(ev(),k(eg)),u=Symbol("last"),h=Symbol("decoder");function cu(e,r,n){let o;if(this.overflow){if(1===(o=this[h].write(e).split(this.matcher)).length)return n();o.shift(),this.overflow=!1}else this[u]+=this[h].write(e),o=this[u].split(this.matcher);this[u]=o.pop();for(let e=0;e<o.length;e++)try{ji(this,this.mapper(o[e]))}catch(e){return n(e)}if(this.overflow=this[u].length>this.maxLength,this.overflow&&!this.skipOverflow){n(Error("maximum buffer reached"));return}n()}function hu(e){if(this[u]+=this[h].end(),this[u])try{ji(this,this.mapper(this[u]))}catch(r){return e(r)}e()}function ji(e,r){void 0!==r&&e.push(r)}function Wi(e){return e}function lu(e,r,l){switch(e=e||/\r?\n/,r=r||Wi,l=l||{},arguments.length){case 1:"function"==typeof e?(r=e,e=/\r?\n/):"object"!=typeof e||e instanceof RegExp||e[Symbol.split]||(l=e,e=/\r?\n/);break;case 2:"function"==typeof e?(l=r,r=e,e=/\r?\n/):"object"==typeof r&&(l=r,r=Wi)}(l=Object.assign({},l)).autoDestroy=!0,l.transform=cu,l.flush=hu,l.readableObjectMode=!0;let p=new n(l);return p[u]="",p[h]=new o("utf8"),p.matcher=e,p.mapper=r,p.maxLength=l.maxLength,p.skipOverflow=l.skipOverflow||!1,p.overflow=!1,p._destroy=function(e,r){this._writableState.errorEmitted=!1,r(e)},p}a(cu,"transform"),a(hu,"flush"),a(ji,"push"),a(Wi,"noop"),a(lu,"split"),r.exports=lu}),eS=I((e,r)=>{E();var n=(el(),k(eh)),o=(ey(),k(ep)).Stream,u=ew(),h=(R(),k(C)),l="win32"===p.platform,d=p.stderr;function bu(e){return(61440&e)==32768}a(bu,"isRegFile");var y=["host","port","database","user","password"],g=y.length,m=y[g-1];function ur(){if(d instanceof o&&!0===d.writable){var e=Array.prototype.slice.call(arguments).concat(`
`);d.write(h.format.apply(h,e))}}a(ur,"warn"),Object.defineProperty(r.exports,"isWin",{get:function(){return l},set:function(e){l=e}}),r.exports.warnTo=function(e){var r=d;return d=e,r},r.exports.getFileName=function(e){var r=e||p.env;return r.PGPASSFILE||(l?n.join(r.APPDATA||"./","postgresql","pgpass.conf"):n.join(r.HOME||"./",".pgpass"))},r.exports.usePgPass=function(e,r){return!Object.prototype.hasOwnProperty.call(p.env,"PGPASSWORD")&&(!!l||(r=r||"<unkn>",bu(e.mode)?!(63&e.mode)||(ur('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',r),!1):(ur('WARNING: password file "%s" is not a plain file',r),!1)))};var b=r.exports.match=function(e,r){return y.slice(0,-1).reduce(function(n,o,u){return 1==u&&Number(e[o]||5432)===Number(r[o])?n&&!0:n&&("*"===r[o]||r[o]===e[o])},!0)};r.exports.getPassword=function(e,r,n){var o,h=r.pipe(u());function s(r){var n=v(r);n&&w(n)&&b(e,n)&&(o=n[m],h.end())}a(s,"onLine");var l=a(function(){r.destroy(),n(o)},"onEnd"),p=a(function(e){r.destroy(),ur("WARNING: error on reading file: %s",e),n(void 0)},"onErr");r.on("error",p),h.on("data",s).on("end",l).on("error",p)};var v=r.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var r="",n="",o=0,u=0,h={},l=a(function(r,n,o){var u=e.substring(n,o);Object.hasOwnProperty.call(p.env,"PGPASS_NO_DEESCAPE")||(u=u.replace(/\\([:\\])/g,"$1")),h[y[r]]=u},"addToObj"),d=0;d<e.length-1;d+=1){if(r=e.charAt(d+1),n=e.charAt(d),o==g-1){l(o,u);break}d>=0&&":"==r&&"\\"!==n&&(l(o,u,d+1),u=d+2,o+=1)}return h=Object.keys(h).length===g?h:null},w=r.exports.isValidEntry=function(e){for(var r={0:function(e){return e.length>0},1:function(e){return"*"===e||isFinite(e=Number(e))&&e>0&&e<9007199254740992&&Math.floor(e)===e},2:function(e){return e.length>0},3:function(e){return e.length>0},4:function(e){return e.length>0}},n=0;n<y.length;n+=1)if(!(0,r[n])(e[y[n]]||""))return!1;return!0}}),e_=I((e,r)=>{E(),el(),k(eh);var n=(ef(),k(ec)),o=eS();r.exports=function(e,r){var u=o.getFileName();n.stat(u,function(h,l){if(h||!o.usePgPass(l,u))return r(void 0);var p=n.createReadStream(u);o.getPassword(e,p,r)})},r.exports.warnTo=o.warnTo}),eE=I((e,r)=>{E();var n=er();function mt(e){this._types=e||n,this.text={},this.binary={}}a(mt,"TypeOverrides"),mt.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}},mt.prototype.setTypeParser=function(e,r,n){"function"==typeof r&&(n=r,r="text"),this.getOverrides(r)[e]=n},mt.prototype.getTypeParser=function(e,r){return r=r||"text",this.getOverrides(r)[e]||this._types.getTypeParser(e,r)},r.exports=mt}),eA={};X(eA,{default:()=>eC});var eC,eI=K(()=>{E(),eC={}}),ex={};function lr(e,r=!1){let{protocol:n}=new URL(e),o="http:"+e.substring(n.length),{username:u,password:h,host:l,hostname:p,port:d,pathname:y,search:g,searchParams:m,hash:b}=new URL(o),v=u+":"+(h=decodeURIComponent(h)),w=r?Object.fromEntries(m.entries()):g;return{href:e,protocol:n,auth:v,username:u,password:h,host:l,hostname:p,port:d,pathname:y,search:g,query:w,hash:b}}X(ex,{parse:()=>lr});var eT=K(()=>{E(),a(lr,"parse")}),eL=I((e,r)=>{E();var n=(eT(),k(ex)),o=(ef(),k(ec));function dr(e){if("/"===e.charAt(0)){var r=e.split(" ");return{host:r[0],database:r[1]}}var u=n.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)?encodeURI(e).replace(/\%25(\d\d)/g,"%$1"):e,!0),r=u.query;for(var h in r)Array.isArray(r[h])&&(r[h]=r[h][r[h].length-1]);var l=(u.auth||":").split(":");if(r.user=l[0],r.password=l.splice(1).join(":"),r.port=u.port,"socket:"==u.protocol)return r.host=decodeURI(u.pathname),r.database=u.query.db,r.client_encoding=u.query.encoding,r;r.host||(r.host=u.hostname);var p=u.pathname;if(!r.host&&p&&/^%2f/i.test(p)){var d=p.split("/");r.host=decodeURIComponent(d[0]),p=d.splice(1).join("/")}switch(p&&"/"===p.charAt(0)&&(p=p.slice(1)||null),r.database=p&&decodeURI(p),("true"===r.ssl||"1"===r.ssl)&&(r.ssl=!0),"0"===r.ssl&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={}),r.sslcert&&(r.ssl.cert=o.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=o.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=o.readFileSync(r.sslrootcert).toString()),r.sslmode){case"disable":r.ssl=!1;break;case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":r.ssl.rejectUnauthorized=!1}return r}a(dr,"parse"),r.exports=dr,dr.parse=dr}),eR=I((e,r)=>{E();var n=(eI(),k(eA)),o=en(),u=eL().parse,h=a(function(e,r,n){return void 0===n?n=p.env["PG"+e.toUpperCase()]:!1===n||(n=p.env[n]),r[e]||n||o[e]},"val"),l=a(function(){switch(p.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return o.ssl},"readSSLConfigFromEnvironment"),d=a(function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),y=a(function(e,r,n){var o=r[n];null!=o&&e.push(n+"="+d(o))},"add"),g=class{constructor(e){(e="string"==typeof e?u(e):e||{}).connectionString&&(e=Object.assign({},e,u(e.connectionString))),this.user=h("user",e),this.database=h("database",e),void 0===this.database&&(this.database=this.user),this.port=parseInt(h("port",e),10),this.host=h("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:h("password",e)}),this.binary=h("binary",e),this.options=h("options",e),this.ssl=typeof e.ssl>"u"?l():e.ssl,"string"==typeof this.ssl&&"true"===this.ssl&&(this.ssl=!0),"no-verify"===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=h("client_encoding",e),this.replication=h("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=h("application_name",e,"PGAPPNAME"),this.fallback_application_name=h("fallback_application_name",e,!1),this.statement_timeout=h("statement_timeout",e,!1),this.lock_timeout=h("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=h("idle_in_transaction_session_timeout",e,!1),this.query_timeout=h("query_timeout",e,!1),void 0===e.connectionTimeoutMillis?this.connect_timeout=p.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),!1===e.keepAlive?this.keepalives=0:!0===e.keepAlive&&(this.keepalives=1),"number"==typeof e.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){var r=[];y(r,this,"user"),y(r,this,"password"),y(r,this,"port"),y(r,this,"application_name"),y(r,this,"fallback_application_name"),y(r,this,"connect_timeout"),y(r,this,"options");var o="object"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(y(r,o,"sslmode"),y(r,o,"sslca"),y(r,o,"sslkey"),y(r,o,"sslcert"),y(r,o,"sslrootcert"),this.database&&r.push("dbname="+d(this.database)),this.replication&&r.push("replication="+d(this.replication)),this.host&&r.push("host="+d(this.host)),this.isDomainSocket)return e(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+d(this.client_encoding)),n.lookup(this.host,function(n,o){return n?e(n,null):(r.push("hostaddr="+d(o)),e(null,r.join(" ")))})}};a(g,"ConnectionParameters"),r.exports=g}),eP=I((e,r)=>{E();var n=er(),o=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,u=class{constructor(e,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray="array"===e,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(e){var r;(r=e.text?o.exec(e.text):o.exec(e.command))&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(e){for(var r=Array(e.length),n=0,o=e.length;n<o;n++){var u=e[n];null!==u?r[n]=this._parsers[n](u):r[n]=null}return r}parseRow(e){for(var r={},n=0,o=e.length;n<o;n++){var u=e[n],h=this.fields[n].name;null!==u?r[h]=this._parsers[n](u):r[h]=null}return r}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=Array(e.length));for(var r=0;r<e.length;r++){var o=e[r];this._types?this._parsers[r]=this._types.getTypeParser(o.dataTypeID,o.format||"text"):this._parsers[r]=n.getTypeParser(o.dataTypeID,o.format||"text")}}};a(u,"Result"),r.exports=u}),eB=I((e,r)=>{E();var{EventEmitter:n}=A(),o=eP(),u=es(),h=class extends n{constructor(e,r,n){super(),e=u.normalizeQueryConfig(e,r,n),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,p.domain&&e.callback&&(this.callback=p.domain.bind(e.callback)),this._result=new o(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return!!this.name||!!this.rows||!!this.text&&!!this.values&&this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new o(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(e.fields)}catch(e){this._canceledDueToError=e;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(e,r){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&r.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,r){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(e){p.nextTick(()=>{throw e})}this.emit("end",this._results)}submit(e){if("string"!=typeof this.text&&"string"!=typeof this.name)return Error("A query must have either text or a name. Supplying neither is unsupported.");let r=e.parsedStatements[this.name];return this.text&&r&&this.text!==r?Error(`Prepared statements must be \
unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,r){e.execute({portal:this.portal,rows:r}),r?e.flush():e.sync()}prepare(e){this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:u.prepareValue})}catch(r){this.handleError(r,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,r){}};a(h,"Query"),r.exports=h}),eM={};function Lu(e){return 0}X(eM,{Socket:()=>eD,isIP:()=>Lu});var ek,eO,eD,eU=K(()=>{E(),ek=We(A(),1),a(Lu,"isIP"),eO=class x extends ek.EventEmitter{constructor(){super(...arguments),T(this,"opts",{}),T(this,"connecting",!1),T(this,"pending",!0),T(this,"writable",!0),T(this,"encrypted",!1),T(this,"authorized",!1),T(this,"destroyed",!1),T(this,"ws",null),T(this,"writeBuffer"),T(this,"tlsState",0),T(this,"tlsRead"),T(this,"tlsWrite")}static get poolQueryViaFetch(){return x.opts.poolQueryViaFetch??x.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){x.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return x.opts.fetchEndpoint??x.defaults.fetchEndpoint}static set fetchEndpoint(e){x.opts.fetchEndpoint=e}static get fetchConnectionCache(){return x.opts.fetchConnectionCache??x.defaults.fetchConnectionCache}static set fetchConnectionCache(e){x.opts.fetchConnectionCache=e}static get fetchFunction(){return x.opts.fetchFunction??x.defaults.fetchFunction}static set fetchFunction(e){x.opts.fetchFunction=e}static get webSocketConstructor(){return x.opts.webSocketConstructor??x.defaults.webSocketConstructor}static set webSocketConstructor(e){x.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??x.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return x.opts.wsProxy??x.defaults.wsProxy}static set wsProxy(e){x.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??x.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return x.opts.coalesceWrites??x.defaults.coalesceWrites}static set coalesceWrites(e){x.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??x.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return x.opts.useSecureWebSocket??x.defaults.useSecureWebSocket}static set useSecureWebSocket(e){x.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??x.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return x.opts.forceDisablePgSSL??x.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){x.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??x.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return x.opts.disableSNI??x.defaults.disableSNI}static set disableSNI(e){x.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??x.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get pipelineConnect(){return x.opts.pipelineConnect??x.defaults.pipelineConnect}static set pipelineConnect(e){x.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??x.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return x.opts.subtls??x.defaults.subtls}static set subtls(e){x.opts.subtls=e}get subtls(){return this.opts.subtls??x.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return x.opts.pipelineTLS??x.defaults.pipelineTLS}static set pipelineTLS(e){x.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??x.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return x.opts.rootCerts??x.defaults.rootCerts}static set rootCerts(e){x.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??x.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,r){let n=this.wsProxy;if(void 0===n)throw Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return"function"==typeof n?n(e,r):`${n}?address=${e}:${r}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,r,n){this.connecting=!0,n&&this.once("connect",n);let o=a(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),u=a((e,r=!1)=>{e.binaryType="arraybuffer",e.addEventListener("error",e=>{this.emit("error",e),this.emit("close")}),e.addEventListener("message",e=>{if(0===this.tlsState){let r=l.from(e.data);this.emit("data",r)}}),e.addEventListener("close",()=>{this.emit("close")}),r?o():e.addEventListener("open",o)},"configureWebSocket"),h;try{h=this.wsProxyAddrForHost(r,"string"==typeof e?parseInt(e,10):e)}catch(e){this.emit("error",e),this.emit("close");return}try{let e=(this.useSecureWebSocket?"wss:":"ws:")+"//"+h;if(void 0!==this.webSocketConstructor)this.ws=new this.webSocketConstructor(e),u(this.ws);else try{this.ws=new WebSocket(e),u(this.ws)}catch{this.ws=new __unstable_WebSocket(e),u(this.ws)}}catch(r){let e=(this.useSecureWebSocket?"https:":"http:")+"//"+h;fetch(e,{headers:{Upgrade:"websocket"}}).then(e=>{if(this.ws=e.webSocket,null==this.ws)throw r;this.ws.accept(),u(this.ws,!0)}).catch(e=>{this.emit("error",Error(`All attempts to open a WebSocket to\
 connect to the database failed. Please refer to https://github.com/neondatabase\
/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined\
. Details: ${e.message}`)),this.emit("close")})}}async startTls(e){if(void 0===this.subtls)throw Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let r=this.subtls.TrustedCert.fromPEM(this.rootCerts),n=new this.subtls.WebSocketReadQueue(this.ws),o=n.read.bind(n),u=this.rawWrite.bind(this),[h,l]=await this.subtls.startTls(e,r,o,u,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=h,this.tlsWrite=l,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(void 0===e)break;{let r=l.from(e);this.emit("data",r)}}}rawWrite(e){if(!this.coalesceWrites){this.ws.send(e);return}if(void 0===this.writeBuffer)this.writeBuffer=e,setTimeout(()=>{this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let r=new Uint8Array(this.writeBuffer.length+e.length);r.set(this.writeBuffer),r.set(e,this.writeBuffer.length),this.writeBuffer=r}}write(e,r="utf8",n=e=>{}){return 0===e.length?n():("string"==typeof e&&(e=l.from(e,r)),0===this.tlsState?(this.rawWrite(e),n()):1===this.tlsState?this.once("secureConnection",()=>{this.write(e,r,n)}):(this.tlsWrite(e),n())),!0}end(e=l.alloc(0),r="utf8",n=()=>{}){return this.write(e,r,()=>{this.ws.close(),n()}),this}destroy(){return this.destroyed=!0,this.end()}},a(eO,"Socket"),T(eO,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:e=>"https://"+e+"/sql",fetchConnectionCache:!1,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:e=>e+"/v2",useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1}),T(eO,"opts",{}),eD=eO}),eF=I(e=>{E(),Object.defineProperty(e,"__esModule",{value:!0}),e.NoticeMessage=e.DataRowMessage=e.CommandCompleteMessage=e.ReadyForQueryMessage=e.NotificationResponseMessage=e.BackendKeyDataMessage=e.AuthenticationMD5Password=e.ParameterStatusMessage=e.ParameterDescriptionMessage=e.RowDescriptionMessage=e.Field=e.CopyResponse=e.CopyDataMessage=e.DatabaseError=e.copyDone=e.emptyQuery=e.replicationStart=e.portalSuspended=e.noData=e.closeComplete=e.bindComplete=e.parseComplete=void 0,e.parseComplete={name:"parseComplete",length:5},e.bindComplete={name:"bindComplete",length:5},e.closeComplete={name:"closeComplete",length:5},e.noData={name:"noData",length:5},e.portalSuspended={name:"portalSuspended",length:5},e.replicationStart={name:"replicationStart",length:4},e.emptyQuery={name:"emptyQuery",length:4},e.copyDone={name:"copyDone",length:4};var r=class extends Error{constructor(e,r,n){super(e),this.length=r,this.name=n}};a(r,"DatabaseError"),e.DatabaseError=r;var n=class{constructor(e,r){this.length=e,this.chunk=r,this.name="copyData"}};a(n,"CopyDataMessage"),e.CopyDataMessage=n;var o=class{constructor(e,r,n,o){this.length=e,this.name=r,this.binary=n,this.columnTypes=Array(o)}};a(o,"CopyResponse"),e.CopyResponse=o;var u=class{constructor(e,r,n,o,u,h,l){this.name=e,this.tableID=r,this.columnID=n,this.dataTypeID=o,this.dataTypeSize=u,this.dataTypeModifier=h,this.format=l}};a(u,"Field"),e.Field=u;var h=class{constructor(e,r){this.length=e,this.fieldCount=r,this.name="rowDescription",this.fields=Array(this.fieldCount)}};a(h,"RowDescriptionMessage"),e.RowDescriptionMessage=h;var l=class{constructor(e,r){this.length=e,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=Array(this.parameterCount)}};a(l,"ParameterDescriptionMessage"),e.ParameterDescriptionMessage=l;var p=class{constructor(e,r,n){this.length=e,this.parameterName=r,this.parameterValue=n,this.name="parameterStatus"}};a(p,"ParameterStatusMessage"),e.ParameterStatusMessage=p;var d=class{constructor(e,r){this.length=e,this.salt=r,this.name="authenticationMD5Password"}};a(d,"AuthenticationMD5Password"),e.AuthenticationMD5Password=d;var y=class{constructor(e,r,n){this.length=e,this.processID=r,this.secretKey=n,this.name="backendKeyData"}};a(y,"BackendKeyDataMessage"),e.BackendKeyDataMessage=y;var g=class{constructor(e,r,n,o){this.length=e,this.processId=r,this.channel=n,this.payload=o,this.name="notification"}};a(g,"NotificationResponseMessage"),e.NotificationResponseMessage=g;var m=class{constructor(e,r){this.length=e,this.status=r,this.name="readyForQuery"}};a(m,"ReadyForQueryMessage"),e.ReadyForQueryMessage=m;var b=class{constructor(e,r){this.length=e,this.text=r,this.name="commandComplete"}};a(b,"CommandCompleteMessage"),e.CommandCompleteMessage=b;var v=class{constructor(e,r){this.length=e,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};a(v,"DataRowMessage"),e.DataRowMessage=v;var w=class{constructor(e,r){this.length=e,this.message=r,this.name="notice"}};a(w,"NoticeMessage"),e.NoticeMessage=w}),eN=I(e=>{E(),Object.defineProperty(e,"__esModule",{value:!0}),e.Writer=void 0;var r=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=l.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){var r=this.buffer,n=r.length+(r.length>>1)+e;this.buffer=l.allocUnsafe(n),r.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(e){var r=l.byteLength(e);this.ensure(r+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=r}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(e=""){var r=l.byteLength(e);return this.ensure(r),this.buffer.write(e,this.offset),this.offset+=r,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){var r=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=l.allocUnsafe(this.size),r}};a(r,"Writer"),e.Writer=r}),eQ=I(e=>{E(),Object.defineProperty(e,"__esModule",{value:!0}),e.serialize=void 0;var r=eN(),n=new r.Writer,o=a(e=>{for(let r of(n.addInt16(3).addInt16(0),Object.keys(e)))n.addCString(r).addCString(e[r]);n.addCString("client_encoding").addCString("UTF8");var o=n.addCString("").flush(),u=o.length+4;return new r.Writer().addInt32(u).add(o).flush()},"startup"),u=a(()=>{let e=l.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},"requestSsl"),h=a(e=>n.addCString(e).flush(112),"password"),p=a(function(e,r){return n.addCString(e).addInt32(l.byteLength(r)).addString(r),n.flush(112)},"sendSASLInitialResponseMessage"),d=a(function(e){return n.addString(e).flush(112)},"sendSCRAMClientFinalMessage"),y=a(e=>n.addCString(e).flush(81),"query"),g=[],m=a(e=>{let r=e.name||"";r.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",r,r.length),console.error("This can cause conflicts and silent errors executing queries"));let o=e.types||g;for(var u=o.length,h=n.addCString(r).addCString(e.text).addInt16(u),l=0;l<u;l++)h.addInt32(o[l]);return n.flush(80)},"parse"),b=new r.Writer,v=a(function(e,r){for(let o=0;o<e.length;o++){let u=r?r(e[o],o):e[o];null==u?(n.addInt16(0),b.addInt32(-1)):u instanceof l?(n.addInt16(1),b.addInt32(u.length),b.add(u)):(n.addInt16(0),b.addInt32(l.byteLength(u)),b.addString(u))}},"writeValues"),w=a((e={})=>{let r=e.portal||"",o=e.statement||"",u=e.binary||!1,h=e.values||g,l=h.length;return n.addCString(r).addCString(o),n.addInt16(l),v(h,e.valueMapper),n.addInt16(l),n.add(b.flush()),n.addInt16(u?1:0),n.flush(66)},"bind"),S=l.from([69,0,0,0,9,0,0,0,0,0]),_=a(e=>{if(!e||!e.portal&&!e.rows)return S;let r=e.portal||"",n=e.rows||0,o=l.byteLength(r),u=4+o+1+4,h=l.allocUnsafe(1+u);return h[0]=69,h.writeInt32BE(u,1),h.write(r,5,"utf-8"),h[o+5]=0,h.writeUInt32BE(n,h.length-4),h},"execute"),A=a((e,r)=>{let n=l.allocUnsafe(16);return n.writeInt32BE(16,0),n.writeInt16BE(1234,4),n.writeInt16BE(5678,6),n.writeInt32BE(e,8),n.writeInt32BE(r,12),n},"cancel"),C=a((e,r)=>{let n=4+l.byteLength(r)+1,o=l.allocUnsafe(1+n);return o[0]=e,o.writeInt32BE(n,1),o.write(r,5,"utf-8"),o[n]=0,o},"cstringMessage"),L=n.addCString("P").flush(68),R=n.addCString("S").flush(68),P=a(e=>e.name?C(68,`${e.type}${e.name||""}`):"P"===e.type?L:R,"describe"),M=a(e=>C(67,`${e.type}${e.name||""}`),"close"),D=a(e=>n.add(e).flush(100),"copyData"),F=a(e=>C(102,e),"copyFail"),N=a(e=>l.from([e,0,0,0,4]),"codeOnlyBuffer"),Q=N(72),q=N(83),W=N(88),$=N(99);e.serialize={startup:o,password:h,requestSsl:u,sendSASLInitialResponseMessage:p,sendSCRAMClientFinalMessage:d,query:y,parse:m,bind:w,execute:_,describe:P,close:M,flush:()=>Q,sync:()=>q,end:()=>W,copyData:D,copyDone:()=>$,copyFail:F,cancel:A}}),ej=I(e=>{E(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferReader=void 0;var r=l.allocUnsafe(0),n=class{constructor(e=0){this.offset=e,this.buffer=r,this.encoding="utf-8"}setBuffer(e,r){this.offset=e,this.buffer=r}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){let r=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,r}cstring(){let e=this.offset,r=e;for(;0!==this.buffer[r++];);return this.offset=r,this.buffer.toString(this.encoding,e,r-1)}bytes(e){let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}};a(n,"BufferReader"),e.BufferReader=n}),eq={};X(eq,{default:()=>eW});var eW,e$=K(()=>{E(),eW={}}),eG=I(e=>{E();var r=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var n=eF(),o=ej(),u=r((e$(),k(eq))),h=l.allocUnsafe(0),p=class{constructor(e){if(this.buffer=h,this.bufferLength=0,this.bufferOffset=0,this.reader=new o.BufferReader,e?.mode==="binary")throw Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,r){this.mergeBuffer(e);let n=this.bufferOffset+this.bufferLength,o=this.bufferOffset;for(;o+5<=n;){let e=this.buffer[o],u=this.buffer.readUInt32BE(o+1),h=1+u;if(h+o<=n)r(this.handlePacket(o+5,e,u,this.buffer)),o+=h;else break}o===n?(this.buffer=h,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-o,this.bufferOffset=o)}mergeBuffer(e){if(this.bufferLength>0){let r=this.bufferLength+e.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let e;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)e=this.buffer;else{let n=2*this.buffer.byteLength;for(;r>=n;)n*=2;e=l.allocUnsafe(n)}this.buffer.copy(e,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=e,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,r,o,h){switch(r){case 50:return n.bindComplete;case 49:return n.parseComplete;case 51:return n.closeComplete;case 110:return n.noData;case 115:return n.portalSuspended;case 99:return n.copyDone;case 87:return n.replicationStart;case 73:return n.emptyQuery;case 68:return this.parseDataRowMessage(e,o,h);case 67:return this.parseCommandCompleteMessage(e,o,h);case 90:return this.parseReadyForQueryMessage(e,o,h);case 65:return this.parseNotificationMessage(e,o,h);case 82:return this.parseAuthenticationResponse(e,o,h);case 83:return this.parseParameterStatusMessage(e,o,h);case 75:return this.parseBackendKeyData(e,o,h);case 69:return this.parseErrorMessage(e,o,h,"error");case 78:return this.parseErrorMessage(e,o,h,"notice");case 84:return this.parseRowDescriptionMessage(e,o,h);case 116:return this.parseParameterDescriptionMessage(e,o,h);case 71:return this.parseCopyInMessage(e,o,h);case 72:return this.parseCopyOutMessage(e,o,h);case 100:return this.parseCopyData(e,o,h);default:u.default.fail(`unknown message code: ${r.toString(16)}`)}}parseReadyForQueryMessage(e,r,o){this.reader.setBuffer(e,o);let u=this.reader.string(1);return new n.ReadyForQueryMessage(r,u)}parseCommandCompleteMessage(e,r,o){this.reader.setBuffer(e,o);let u=this.reader.cstring();return new n.CommandCompleteMessage(r,u)}parseCopyData(e,r,o){let u=o.slice(e,e+(r-4));return new n.CopyDataMessage(r,u)}parseCopyInMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyInResponse")}parseCopyOutMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyOutResponse")}parseCopyMessage(e,r,o,u){this.reader.setBuffer(e,o);let h=0!==this.reader.byte(),l=this.reader.int16(),p=new n.CopyResponse(r,u,h,l);for(let e=0;e<l;e++)p.columnTypes[e]=this.reader.int16();return p}parseNotificationMessage(e,r,o){this.reader.setBuffer(e,o);let u=this.reader.int32(),h=this.reader.cstring(),l=this.reader.cstring();return new n.NotificationResponseMessage(r,u,h,l)}parseRowDescriptionMessage(e,r,o){this.reader.setBuffer(e,o);let u=this.reader.int16(),h=new n.RowDescriptionMessage(r,u);for(let e=0;e<u;e++)h.fields[e]=this.parseField();return h}parseField(){let e=this.reader.cstring(),r=this.reader.int32(),o=this.reader.int16(),u=this.reader.int32(),h=this.reader.int16(),l=this.reader.int32(),p=0===this.reader.int16()?"text":"binary";return new n.Field(e,r,o,u,h,l,p)}parseParameterDescriptionMessage(e,r,o){this.reader.setBuffer(e,o);let u=this.reader.int16(),h=new n.ParameterDescriptionMessage(r,u);for(let e=0;e<u;e++)h.dataTypeIDs[e]=this.reader.int32();return h}parseDataRowMessage(e,r,o){this.reader.setBuffer(e,o);let u=this.reader.int16(),h=Array(u);for(let e=0;e<u;e++){let r=this.reader.int32();h[e]=-1===r?null:this.reader.string(r)}return new n.DataRowMessage(r,h)}parseParameterStatusMessage(e,r,o){this.reader.setBuffer(e,o);let u=this.reader.cstring(),h=this.reader.cstring();return new n.ParameterStatusMessage(r,u,h)}parseBackendKeyData(e,r,o){this.reader.setBuffer(e,o);let u=this.reader.int32(),h=this.reader.int32();return new n.BackendKeyDataMessage(r,u,h)}parseAuthenticationResponse(e,r,o){this.reader.setBuffer(e,o);let u=this.reader.int32(),h={name:"authenticationOk",length:r};switch(u){case 0:break;case 3:8===h.length&&(h.name="authenticationCleartextPassword");break;case 5:if(12===h.length){h.name="authenticationMD5Password";let e=this.reader.bytes(4);return new n.AuthenticationMD5Password(r,e)}break;case 10:let l;h.name="authenticationSASL",h.mechanisms=[];do(l=this.reader.cstring())&&h.mechanisms.push(l);while(l);break;case 11:h.name="authenticationSASLContinue",h.data=this.reader.string(r-8);break;case 12:h.name="authenticationSASLFinal",h.data=this.reader.string(r-8);break;default:throw Error("Unknown authenticationOk message type "+u)}return h}parseErrorMessage(e,r,o,u){this.reader.setBuffer(e,o);let h={},l=this.reader.string(1);for(;"\x00"!==l;)h[l]=this.reader.cstring(),l=this.reader.string(1);let p=h.M,d="notice"===u?new n.NoticeMessage(r,p):new n.DatabaseError(p,r,u);return d.severity=h.S,d.code=h.C,d.detail=h.D,d.hint=h.H,d.position=h.P,d.internalPosition=h.p,d.internalQuery=h.q,d.where=h.W,d.schema=h.s,d.table=h.t,d.column=h.c,d.dataType=h.d,d.constraint=h.n,d.file=h.F,d.line=h.L,d.routine=h.R,d}};a(p,"Parser"),e.Parser=p}),ez=I(e=>{E(),Object.defineProperty(e,"__esModule",{value:!0}),e.DatabaseError=e.serialize=e.parse=void 0;var r=eF();Object.defineProperty(e,"DatabaseError",{enumerable:!0,get:function(){return r.DatabaseError}});var n=eQ();Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return n.serialize}});var o=eG();function hc(e,r){let n=new o.Parser;return e.on("data",e=>n.parse(e,r)),new Promise(r=>e.on("end",()=>r()))}a(hc,"parse"),e.parse=hc}),eH={};function lc({socket:e,servername:r}){return e.startTls(r),e}X(eH,{connect:()=>lc});var eV=K(()=>{E(),a(lc,"connect")}),eK=I((e,r)=>{E();var n=(eU(),k(eM)),o=A().EventEmitter,{parse:u,serialize:h}=ez(),l=h.flush(),p=h.sync(),d=h.end(),y=class extends o{constructor(e){super(),e=e||{},this.stream=e.stream||new n.Socket,this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;var r=this;this.on("newListener",function(e){"message"===e&&(r._emitMessage=!0)})}connect(e,r){var o=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,r),this.stream.once("connect",function(){o._keepAlive&&o.stream.setKeepAlive(!0,o._keepAliveInitialDelayMillis),o.emit("connect")});let u=a(function(e){o._ending&&("ECONNRESET"===e.code||"EPIPE"===e.code)||o.emit("error",e)},"reportStreamError");if(this.stream.on("error",u),this.stream.on("close",function(){o.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(e){switch(e.toString("utf8")){case"S":break;case"N":return o.stream.end(),o.emit("error",Error("The server does not support SSL connections"));default:return o.stream.end(),o.emit("error",Error("There was an error establishing an SSL connection"))}var h=(eV(),k(eH));let l={socket:o.stream};!0!==o.ssl&&(Object.assign(l,o.ssl),"key"in o.ssl&&(l.key=o.ssl.key)),0===n.isIP(r)&&(l.servername=r);try{o.stream=h.connect(l)}catch(e){return o.emit("error",e)}o.attachListeners(o.stream),o.stream.on("error",u),o.emit("sslconnect")})}attachListeners(e){e.on("end",()=>{this.emit("end")}),u(e,e=>{var r="error"===e.name?"errorMessage":e.name;this._emitMessage&&this.emit("message",e),this.emit(r,e)})}requestSsl(){this.stream.write(h.requestSsl())}startup(e){this.stream.write(h.startup(e))}cancel(e,r){this._send(h.cancel(e,r))}password(e){this._send(h.password(e))}sendSASLInitialResponseMessage(e,r){this._send(h.sendSASLInitialResponseMessage(e,r))}sendSCRAMClientFinalMessage(e){this._send(h.sendSCRAMClientFinalMessage(e))}_send(e){return!!this.stream.writable&&this.stream.write(e)}query(e){this._send(h.query(e))}parse(e){this._send(h.parse(e))}bind(e){this._send(h.bind(e))}execute(e){this._send(h.execute(e))}flush(){this.stream.writable&&this.stream.write(l)}sync(){this._ending=!0,this._send(l),this._send(p)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(d,()=>{this.stream.end()})}close(e){this._send(h.close(e))}describe(e){this._send(h.describe(e))}sendCopyFromChunk(e){this._send(h.copyData(e))}endCopyFrom(){this._send(h.copyDone())}sendCopyFail(e){this._send(h.copyFail(e))}};a(y,"Connection"),r.exports=y}),eY=I((e,r)=>{E();var n=A().EventEmitter,u=(R(),k(C),es()),h=eo(),l=e_(),d=eE(),y=eR(),g=eB(),m=en(),b=eK(),v=class extends n{constructor(e){super(),this.connectionParameters=new y(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var r=e||{};this._Promise=r.Promise||o.Promise,this._types=new d(r.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=r.connection||new b({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||m.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(e){let r=a(r=>{p.nextTick(()=>{r.handleError(e,this.connection)})},"enqueueError");this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(e){var r=this,n=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let r=Error("Client has already been connected. You cannot reuse a client.");p.nextTick(()=>{e(r)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf("/")?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let e=this._ending?Error("Connection terminated"):Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(e),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(e):this._handleErrorEvent(e):this._connectionError||this._handleErrorEvent(e)),p.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((e,r)=>{this._connect(n=>{n?r(n):e()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let r=this.connection;"function"==typeof this.password?this._Promise.resolve().then(()=>this.password()).then(n=>{if(void 0!==n){if("string"!=typeof n){r.emit("error",TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;e()}).catch(e=>{r.emit("error",e)}):null!==this.password?e():l(this.connectionParameters,r=>{void 0!==r&&(this.connectionParameters.password=this.password=r),e()})}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(()=>{let r=u.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(r)})}_handleAuthSASL(e){this._checkPgPass(()=>{this.saslSession=h.startSession(e.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(e){h.continueSession(this.saslSession,this.password,e.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(e){h.finalizeSession(this.saslSession,e.data),this.saslSession=null}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let r=this.activeQuery;if(!r){this._handleErrorEvent(e);return}this.activeQuery=null,r.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(e){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){var e=this.connectionParameters,r={user:e.user,database:e.database},n=e.application_name||e.fallback_application_name;return n&&(r.application_name=n),e.replication&&(r.replication=""+e.replication),e.statement_timeout&&(r.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(r.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(r.options=e.options),r}cancel(e,r){if(e.activeQuery===r){var n=this.connection;this.host&&0===this.host.indexOf("/")?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(e.processID,e.secretKey)})}else -1!==e.queryQueue.indexOf(r)&&e.queryQueue.splice(e.queryQueue.indexOf(r),1)}setTypeParser(e,r,n){return this._types.setTypeParser(e,r,n)}getTypeParser(e,r){return this._types.getTypeParser(e,r)}escapeIdentifier(e){return'"'+e.replace(/"/g,'""')+'"'}escapeLiteral(e){for(var r=!1,n="'",o=0;o<e.length;o++){var u=e[o];"'"===u?n+=u+u:"\\"===u?(n+=u+u,r=!0):n+=u}return n+="'",!0===r&&(n=" E"+n),n}_pulseQueryQueue(){if(!0===this.readyForQuery){if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&p.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}}query(e,r,n){var o,u,h,l,d;if(null==e)throw TypeError("Client was passed a null or undefined query");return"function"==typeof e.submit?(h=e.query_timeout||this.connectionParameters.query_timeout,u=o=e,"function"==typeof r&&(o.callback=o.callback||r)):(h=this.connectionParameters.query_timeout,(o=new g(e,r,n)).callback||(u=new this._Promise((e,r)=>{o.callback=(n,o)=>n?r(n):e(o)}))),h&&(d=o.callback,l=setTimeout(()=>{var e=Error("Query read timeout");p.nextTick(()=>{o.handleError(e,this.connection)}),d(e),o.callback=()=>{};var r=this.queryQueue.indexOf(o);r>-1&&this.queryQueue.splice(r,1),this._pulseQueryQueue()},h),o.callback=(e,r)=>{clearTimeout(l),d(e,r)}),this.binary&&!o.binary&&(o.binary=!0),o._result&&!o._result._types&&(o._result._types=this._types),this._queryable?this._ending?p.nextTick(()=>{o.handleError(Error("Client was closed and is not queryable"),this.connection)}):(this.queryQueue.push(o),this._pulseQueryQueue()):p.nextTick(()=>{o.handleError(Error("Client has encountered a connection error and is not queryable"),this.connection)}),u}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting){if(!e)return this._Promise.resolve();e()}if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!e)return new this._Promise(e=>{this.connection.once("end",e)});this.connection.once("end",e)}};a(v,"Client"),v.Query=g,r.exports=v}),eX=I((e,r)=>{E();var n=A().EventEmitter,h=a(function(){},"NOOP"),l=a((e,r)=>{let n=e.findIndex(r);return -1===n?void 0:e.splice(n,1)[0]},"removeWhere"),d=class{constructor(e,r,n){this.client=e,this.idleListener=r,this.timeoutId=n}};a(d,"IdleItem");var y=class{constructor(e){this.callback=e}};function _c(){throw Error("Release called on client which has already been released to the pool.")}function _t(e,r){let n,o;return r?{callback:r,result:void 0}:{callback:a(function(e,r){e?n(e):o(r)},"cb"),result:new e(function(e,r){o=e,n=r}).catch(e=>{throw Error.captureStackTrace(e),e})}}function Ac(e,r){return a(function t(n){n.client=r,r.removeListener("error",t),r.on("error",()=>{e.log("additional client error after disconnection due to error",n)}),e._remove(r),e.emit("error",n,r)},"idleListener")}a(y,"PendingItem"),a(_c,"throwOnDoubleRelease"),a(_t,"promisify"),a(Ac,"makeIdleListener");var g=class extends n{constructor(e,r){super(),this.options=Object.assign({},e),null!=e&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),null!=e&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||e3().Client,this.Promise=this.options.Promise||o.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(e=>{this._remove(e.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let n=r.client;n.ref&&n.ref();let o=r.idleListener;return this._acquireClient(n,e,o,!1)}if(!this._isFull())return this.newClient(e);throw Error("unexpected condition")}_remove(e){let r=l(this._idle,r=>r.client===e);void 0!==r&&clearTimeout(r.timeoutId),this._clients=this._clients.filter(r=>r!==e),e.end(),this.emit("remove",e)}connect(e){if(this.ending){let r=Error("Cannot use a pool after calling end on the pool");return e?e(r):this.Promise.reject(r)}let r=_t(this.Promise,e),n=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&p.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new y(r.callback)),n;let e=a((e,n,o)=>{clearTimeout(u),r.callback(e,n,o)},"queueCallback"),o=new y(e),u=setTimeout(()=>{l(this._pendingQueue,r=>r.callback===e),o.timedOut=!0,r.callback(Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(o),n}return this.newClient(new y(r.callback)),n}newClient(e){let r=new this.Client(this.options);this._clients.push(r);let n=Ac(this,r);this.log("checking client timeout");let o,u=!1;this.options.connectionTimeoutMillis&&(o=setTimeout(()=>{this.log("ending client due to timeout"),u=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(l=>{if(o&&clearTimeout(o),r.on("error",n),l)this.log("client failed to connect",l),this._clients=this._clients.filter(e=>e!==r),u&&(l.message="Connection terminated due to connection timeout"),this._pulseQueue(),e.timedOut||e.callback(l,void 0,h);else{if(this.log("new client connected"),0!==this.options.maxLifetimeSeconds){let e=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),-1!==this._idle.findIndex(e=>e.client===r)&&this._acquireClient(r,new y((e,r,n)=>n()),n,!1)},1e3*this.options.maxLifetimeSeconds);e.unref(),r.once("end",()=>clearTimeout(e))}return this._acquireClient(r,e,n,!0)}})}_acquireClient(e,r,n,o){o&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,n),e.removeListener("error",n),r.timedOut?o&&this.options.verify?this.options.verify(e,e.release):e.release():o&&this.options.verify?this.options.verify(e,n=>{if(n)return e.release(n),r.callback(n,void 0,h);r.callback(void 0,e,e.release)}):r.callback(void 0,e,e.release)}_releaseOnce(e,r){let n=!1;return o=>{n&&_c(),n=!0,this._release(e,r,o)}}_release(e,r,n){let o;if(e.on("error",r),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",n,e),n||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses){e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e),this._pulseQueue();return}if(this._expired.has(e)){this.log("remove expired client"),this._expired.delete(e),this._remove(e),this._pulseQueue();return}this.options.idleTimeoutMillis&&(o=setTimeout(()=>{this.log("remove idle client"),this._remove(e)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&o.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new d(e,r,o)),this._pulseQueue()}query(e,r,n){if("function"==typeof e){let r=_t(this.Promise,e);return u(function(){return r.callback(Error("Passing a function as the first parameter to pool.query is not supported"))}),r.result}"function"==typeof r&&(n=r,r=void 0);let o=_t(this.Promise,n);return n=o.callback,this.connect((o,u)=>{if(o)return n(o);let h=!1,l=a(e=>{h||(h=!0,u.release(e),n(e))},"onError");u.once("error",l),this.log("dispatching query");try{u.query(e,r,(e,r)=>{if(this.log("query dispatched"),u.removeListener("error",l),!h)return h=!0,u.release(e),e?n(e):n(void 0,r)})}catch(e){return u.release(e),n(e)}}),o.result}end(e){if(this.log("ending"),this.ending){let r=Error("Called end on pool more than once");return e?e(r):this.Promise.reject(r)}this.ending=!0;let r=_t(this.Promise,e);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,r)=>e+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};a(g,"Pool"),r.exports=g}),eJ={};X(eJ,{default:()=>eZ});var eZ,e0=K(()=>{E(),eZ={}}),e1=I((e,r)=>{r.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),e2=I((e,r)=>{E();var n=A().EventEmitter,o=(R(),k(C)),h=es(),l=r.exports=function(e,r,o){n.call(this),e=h.normalizeQueryConfig(e,r,o),this.text=e.text,this.values=e.values,this.name=e.name,this.callback=e.callback,this.state="new",this._arrayMode="array"===e.rowMode,this._emitRowEvents=!1,this.on("newListener",(function(e){"row"===e&&(this._emitRowEvents=!0)}).bind(this))};o.inherits(l,n);var d={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};l.prototype.handleError=function(e){var r=this.native.pq.resultErrorFields();if(r)for(var n in r)e[d[n]||n]=r[n];this.callback?this.callback(e):this.emit("error",e),this.state="error"},l.prototype.then=function(e,r){return this._getPromise().then(e,r)},l.prototype.catch=function(e){return this._getPromise().catch(e)},l.prototype._getPromise=function(){return this._promise||(this._promise=new Promise((function(e,r){this._once("end",e),this._once("error",r)}).bind(this))),this._promise},l.prototype.submit=function(e){this.state="running";var r=this;this.native=e.native,e.native.arrayMode=this._arrayMode;var n=a(function(n,o,h){if(e.native.arrayMode=!1,u(function(){r.emit("_done")}),n)return r.handleError(n);r._emitRowEvents&&(h.length>1?o.forEach((e,n)=>{e.forEach(e=>{r.emit("row",e,h[n])})}):o.forEach(function(e){r.emit("row",e,h)})),r.state="end",r.emit("end",h),r.callback&&r.callback(null,h)},"after");if(p.domain&&(n=p.domain.bind(n)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var o=(this.values||[]).map(h.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){let e=Error(`Pre\
pared statements must be unique - '${this.name}' was used for a different statem\
ent`);return n(e)}return e.native.execute(this.name,o,n)}return e.native.prepare(this.name,this.text,o.length,function(u){return u?n(u):(e.namedQueries[r.name]=r.text,r.native.execute(r.name,o,n))})}if(this.values){if(!Array.isArray(this.values)){let e=Error("Query values must be an array");return n(e)}var l=this.values.map(h.prepareValue);e.native.query(this.text,l,n)}else e.native.query(this.text,n)}}),e6=I((e,r)=>{E();var n=(e0(),k(eJ)),u=eE(),h=(e1(),A().EventEmitter),l=(R(),k(C)),d=eR(),y=e2(),g=r.exports=function(e){h.call(this),e=e||{},this._Promise=e.Promise||o.Promise,this._types=new u(e.types),this.native=new n({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var r=this.connectionParameters=new d(e);this.user=r.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:r.password}),this.database=r.database,this.host=r.host,this.port=r.port,this.namedQueries={}};g.Query=y,l.inherits(g,h),g.prototype._errorAllQueries=function(e){let r=a(r=>{p.nextTick(()=>{r.native=this.native,r.handleError(e)})},"enqueueError");this._hasActiveQuery()&&(r(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(r),this._queryQueue.length=0},g.prototype._connect=function(e){var r=this;if(this._connecting){p.nextTick(()=>e(Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(n,o){if(n)return e(n);r.native.connect(o,function(n){if(n)return r.native.end(),e(n);r._connected=!0,r.native.on("error",function(e){r._queryable=!1,r._errorAllQueries(e),r.emit("error",e)}),r.native.on("notification",function(e){r.emit("notification",{channel:e.relname,payload:e.extra})}),r.emit("connect"),r._pulseQueryQueue(!0),e()})})},g.prototype.connect=function(e){if(e){this._connect(e);return}return new this._Promise((e,r)=>{this._connect(n=>{n?r(n):e()})})},g.prototype.query=function(e,r,n){var o,u,h,l,d;if(null==e)throw TypeError("Client was passed a null or undefined query");if("function"==typeof e.submit)h=e.query_timeout||this.connectionParameters.query_timeout,u=o=e,"function"==typeof r&&(e.callback=r);else if(h=this.connectionParameters.query_timeout,!(o=new y(e,r,n)).callback){let e,r;u=new this._Promise((n,o)=>{e=n,r=o}),o.callback=(n,o)=>n?r(n):e(o)}return h&&(d=o.callback,l=setTimeout(()=>{var e=Error("Query read timeout");p.nextTick(()=>{o.handleError(e,this.connection)}),d(e),o.callback=()=>{};var r=this._queryQueue.indexOf(o);r>-1&&this._queryQueue.splice(r,1),this._pulseQueryQueue()},h),o.callback=(e,r)=>{clearTimeout(l),d(e,r)}),this._queryable?this._ending?(o.native=this.native,p.nextTick(()=>{o.handleError(Error("Client was closed and is not queryable"))})):(this._queryQueue.push(o),this._pulseQueryQueue()):(o.native=this.native,p.nextTick(()=>{o.handleError(Error("Client has encountered a connection error and is not queryable"))})),u},g.prototype.end=function(e){var r,n=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e)),e||(r=new this._Promise(function(r,n){e=a(e=>e?n(e):r(),"cb")})),this.native.end(function(){n._errorAllQueries(Error("Connection terminated")),p.nextTick(()=>{n.emit("end"),e&&e()})}),r},g.prototype._hasActiveQuery=function(){return this._activeQuery&&"error"!==this._activeQuery.state&&"end"!==this._activeQuery.state},g.prototype._pulseQueryQueue=function(e){if(this._connected&&!this._hasActiveQuery()){var r=this._queryQueue.shift();if(!r){e||this.emit("drain");return}this._activeQuery=r,r.submit(this);var n=this;r.once("_done",function(){n._pulseQueryQueue()})}},g.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel(function(){}):-1!==this._queryQueue.indexOf(e)&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)},g.prototype.ref=function(){},g.prototype.unref=function(){},g.prototype.setTypeParser=function(e,r,n){return this._types.setTypeParser(e,r,n)},g.prototype.getTypeParser=function(e,r){return this._types.getTypeParser(e,r)}}),e5=I((e,r)=>{E(),r.exports=e6()}),e3=I((e,r)=>{E();var n=eY(),o=en(),u=eK(),h=eX(),{DatabaseError:l}=ez(),d=a(e=>{var r;return a(r=class extends h{constructor(r){super(r,e)}},"BoundPool"),r},"poolFactory"),y=a(function(e){this.defaults=o,this.Client=e,this.Query=this.Client.Query,this.Pool=d(this.Client),this._pools=[],this.Connection=u,this.types=er(),this.DatabaseError=l},"PG");"u">typeof p.env.NODE_PG_FORCE_NATIVE?r.exports=new y(e5()):(r.exports=new y(n),Object.defineProperty(r.exports,"native",{configurable:!0,enumerable:!1,get(){var e=null;try{e=new y(e5())}catch(e){if("MODULE_NOT_FOUND"!==e.code)throw e}return Object.defineProperty(r.exports,"native",{value:e}),e}}))});E();var e4=We(e3());eU(),E(),eT(),eU();var e8=We(es()),e7=class extends Error{constructor(){super(...arguments),T(this,"name","NeonDbError"),T(this,"code",null),T(this,"sourceError")}};a(e7,"NeonDbError");var e9="transaction() expects an array of queries, or a function returning an array of queries";function Ys(e,{arrayMode:r,fullResults:n,fetchOptions:o,isolationLevel:u,readOnly:h,deferrable:l,queryCallback:p,resultCallback:d}={}){let y;if(!e)throw Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");try{y=lr(e)}catch{throw Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(e))}let{protocol:g,username:m,password:b,hostname:v,port:w,pathname:S}=y;if("postgres:"!==g&&"postgresql:"!==g||!m||!b||!v||!S)throw Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function J(e,...r){let n,o;if("string"==typeof e)n=e,o=r[1],r=r[0]??[];else{n="";for(let o=0;o<e.length;o++)n+=e[o],o<r.length&&(n+="$"+(o+1))}let u={query:n,params:r=r.map(e=>(0,e8.prepareValue)(e))};return p&&p(u),Nc(pe,u,o)}async function pe(p,y){let g,m=o??{},{fetchEndpoint:b,fetchConnectionCache:S,fetchFunction:_}=eD,E="function"==typeof b?b(v,w):b,A=Array.isArray(p)?{queries:p}:p,C=r??!1,L=n??!1,R=u,P=h,M=l;void 0!==y&&(void 0!==y.arrayMode&&(C=y.arrayMode),void 0!==y.fullResults&&(L=y.fullResults),void 0!==y.fetchOptions&&(m={...m,...y.fetchOptions}),void 0!==y.isolationLevel&&(R=y.isolationLevel),void 0!==y.readOnly&&(P=y.readOnly),void 0!==y.deferrable&&(M=y.deferrable));let D={"Neon-Connection-String":e,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"};!0===S&&(D["Neon-Pool-Opt-In"]="true"),Array.isArray(p)&&(void 0!==R&&(D["Neon-Batch-Isolation-Level"]=R),void 0!==P&&(D["Neon-Batch-Read-Only"]=String(P)),void 0!==M&&(D["Neon-Batch-Deferrable"]=String(M)));try{g=await (_??fetch)(E,{method:"POST",body:JSON.stringify(A),headers:D,...m})}catch(r){let e=new e7(`Error connecting to data\
base: ${r.message}`);throw e.sourceError=r,e}if(g.ok){let e=await g.json();if(!Array.isArray(p))return Vs(e,{arrayMode:C,fullResults:L,parameterizedQuery:p,resultCallback:d});{let r=e.results;if(!Array.isArray(r))throw new e7("Neon internal error: unexpected result format");return r.map((e,r)=>Vs(e,{arrayMode:C,fullResults:L,parameterizedQuery:p[r],resultCallback:d}))}}{let{status:e}=g;if(400===e){let{message:e,code:r}=await g.json(),n=new e7(e);throw n.code=r,n}{let r=await g.text();throw new e7(`Server error (HTTP status ${e}): ${r}`)}}}return a(J,"resolve"),J.transaction=async(e,r)=>{if("function"==typeof e&&(e=e(J)),!Array.isArray(e))throw Error(e9);return pe(e.map(e=>{if("NeonQueryPromise"!==e[Symbol.toStringTag])throw Error(e9);return e.parameterizedQuery}),r)},a(pe,"execute"),J}function Nc(e,r,n){return{[Symbol.toStringTag]:"NeonQueryPromise",parameterizedQuery:r,opts:n,then:(o,u)=>e(r,n).then(o,u),catch:o=>e(r,n).catch(o),finally:o=>e(r,n).finally(o)}}function Vs(e,{arrayMode:r,fullResults:n,parameterizedQuery:o,resultCallback:u}){let h=e.fields.map(e=>e.name),l=e.fields.map(e=>tt.types.getTypeParser(e.dataTypeID)),p=!0===r?e.rows.map(e=>e.map((e,r)=>null===e?null:l[r](e))):e.rows.map(e=>Object.fromEntries(e.map((e,r)=>[h[r],null===e?null:l[r](e)])));return u&&u(o,e,p,{arrayMode:r,fullResults:n}),n?(e.viaNeonFetch=!0,e.rowAsArray=r,e.rows=p,e):p}a(Ys,"neon"),a(Nc,"createNeonQueryPromise"),a(Vs,"processQueryResult");var te=We(eR()),tt=We(e3()),tr=class extends e4.Client{constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:r}=this;r.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&r.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let n=this.config?.host!==void 0||this.config?.connectionString!==void 0||void 0!==p.env.PGHOST,o=p.env.USER??p.env.USERNAME;if(!n&&"localhost"===this.host&&this.user===o&&this.database===o&&null===this.password)throw Error(`No datab\
ase host or connection string was set, and key parameters have default values (h\
ost: localhost, user: ${o}, db: ${o}, password: null). Is an environment variabl\
e missing? Alternatively, if you intended to connect with these parameters, plea\
se set the host to 'localhost' explicitly.`);let u=super.connect(e),h=r.pipelineTLS&&this.ssl,l="password"===r.pipelineConnect;if(!h&&!r.pipelineConnect)return u;let d=this.connection;if(h&&d.on("connect",()=>d.stream.emit("data","S")),l){d.removeAllListeners("authenticationCleartextPassword"),d.removeAllListeners("readyForQuery"),d.once("readyForQuery",()=>d.on("readyForQuery",this._handleReadyForQuery.bind(this)));let e=this.ssl?"sslconnect":"connect";d.on(e,()=>{this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return u}async _handleAuthSASLContinue(e){let r=this.saslSession,n=this.password,o=e.data;if("SASLInitialResponse"!==r.message||"string"!=typeof n||"string"!=typeof o)throw Error("SASL: protocol error");let u=Object.fromEntries(o.split(",").map(e=>{if(!/^.=/.test(e))throw Error("SASL: Invalid attribute pair entry");return[e[0],e.substring(2)]})),p=u.r,d=u.s,y=u.i;if(!p||!/^[!-+--~]+$/.test(p))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!d||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(d))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!y||!/^[1-9][0-9]*$/.test(y))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!p.startsWith(r.clientNonce))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(p.length===r.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let g=parseInt(y,10),m=l.from(d,"base64"),b=new TextEncoder,v=b.encode(n),w=await h.subtle.importKey("raw",v,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),S=new Uint8Array(await h.subtle.sign("HMAC",w,l.concat([m,l.from([0,0,0,1])]))),_=S;for(var E=0;E<g-1;E++)S=new Uint8Array(await h.subtle.sign("HMAC",w,S)),_=l.from(_.map((e,r)=>_[r]^S[r]));let A=_,C=await h.subtle.importKey("raw",A,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),L=new Uint8Array(await h.subtle.sign("HMAC",C,b.encode("Client Key"))),R=await h.subtle.digest("SHA-256",L),P="n=*,r="+r.clientNonce,M="r="+p+",s="+d+",i="+g,D="c=biws,r="+p,F=P+","+M+","+D,N=await h.subtle.importKey("raw",R,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var Q=new Uint8Array(await h.subtle.sign("HMAC",N,b.encode(F))),q=l.from(L.map((e,r)=>L[r]^Q[r])).toString("base64");let W=await h.subtle.importKey("raw",A,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),$=await h.subtle.sign("HMAC",W,b.encode("Server Key")),G=await h.subtle.importKey("raw",$,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var H=l.from(await h.subtle.sign("HMAC",G,b.encode(F)));r.message="SASLResponse",r.serverSignature=H.toString("base64"),r.response=D+",p="+q,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};function Qc(e,r){let n,o;return r?{callback:r,result:void 0}:{callback:a(function(e,r){e?n(e):o(r)},"cb"),result:new e(function(e,r){o=e,n=r})}}a(tr,"NeonClient"),a(Qc,"promisify");var tn=class extends e4.Pool{constructor(){super(...arguments),T(this,"Client",tr),T(this,"hasFetchUnsupportedListeners",!1)}on(e,r){return"error"!==e&&(this.hasFetchUnsupportedListeners=!0),super.on(e,r)}query(e,r,n){if(!eD.poolQueryViaFetch||this.hasFetchUnsupportedListeners||"function"==typeof e)return super.query(e,r,n);"function"==typeof r&&(n=r,r=void 0);let o=Qc(this.Promise,n);n=o.callback;try{let o=new te.default(this.options),u=encodeURIComponent,h=encodeURI,l=`postgresql://${u(o.user)}:${u(o.password)}@${u(o.host)}/${h(o.database)}`,p="string"==typeof e?e:e.text,d=r??e.values??[];Ys(l,{fullResults:!0,arrayMode:"array"===e.rowMode})(p,d).then(e=>n(void 0,e)).catch(e=>n(e))}catch(e){n(e)}return o.result}};a(tn,"NeonPool");var ts=tn;tt.ClientBase,tt.Connection,tt.DatabaseError,tt.Query,tt.defaults,tt.types;/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/}};